#############################################################
#                                                            #
#                          Mexico Events                        #
#                                                            #
#############################################################

country_event = {
    id = 44800
    title = "EVTNAME44800" #Madero's Manifesto
    desc = "EVTDESC44800"
    picture = "Madero"

    fire_only_once = yes

    trigger = {
        tag = MEX
        year = 1909
        war = no
        NOT = {
            year = 1913
            government = democracy
            government = hms_government
            government = constitutional_empire
            poor_strata_everyday_needs = 0.75 #will not fire if poor are getting 75%+ everyday needs
        }
    }

    mean_time_to_happen = {
        months = 5
        modifier = {
            factor = 0.75 #increase likelihood to happen
            year = 1911
        }
        modifier = {
            factor = 0.95 #increase likelihood to happen
            year = 1912
        }
    }

    option = {
        name = "EVTOPTA44800" #Diaz vows to remain President
        farmers = {
            militancy = 3
            consciousness = 3
        }
        labourers = {
            militancy = 3
            consciousness = 3
        }
        craftsmen = {
            militancy = 3
            consciousness = 3
        }
        artisans = {
            militancy = 3
            consciousness = 3
        }
        set_country_flag = Madero
    }

    option = {
        name = "EVTOPTB44800" #Diaz steps down
        prestige = -25
        officers = {
            militancy = 3
            consciousness = 3
        }
        aristocrats = {
            militancy = 3
            consciousness = 3
        }
        capitalists = {
            militancy = 3
            consciousness = 3
        }
		remove_country_modifier = porfiriato
        government = democracy
        ruling_party_ideology = liberal
        political_reform = universal_weighted_voting
        political_reform = population_equal_weight
        political_reform = yes_meeting
        political_reform = free_press
        political_reform = non_socialist
        political_reform = gerrymandering
        add_country_modifier = {
            name = national_confusion
            duration = 365
        }
        country_event = 800054
    }
}

country_event = {
    id = 44801
    title = "EVTNAME44801" #Madero Enlists Supporters
    desc = "EVTDESC44801"
    picture = "Riot"

    fire_only_once = yes

    trigger = {
        tag = MEX
        year = 1911
        war = no
        has_country_flag = Madero
        NOT = {
            year = 1914
            government = democracy
            government = hms_government
            government = constitutional_empire
            poor_strata_everyday_needs = 0.95 #will not fire if poor are getting 95%+ everyday needs
        }
    }

    mean_time_to_happen = {
        months = 5
        modifier = {
            factor = 0.75 #increase likelihood to happen
            year = 1912
        }
        modifier = {
            factor = 0.95 #increase likelihood to happen
            year = 1913
        }
    }

    option = {
        name = "EVTOPTA44801" #Viva la revolucion!
		remove_country_modifier = porfiriato
        2137 = { #Hermosillo Sonora
            any_pop = {
                militancy = 8
            }
        }
        2139 = { #N Baja
            any_pop = {
                militancy = 8
            }
        }
        2142 = { #Chihuahua
            any_pop = {
                militancy = 8
            }
        }
        2143 = { #Nogales
            any_pop = {
                militancy = 8
            }
        }
        set_country_flag = MaderoRevolt
    }
}

country_event = {
    id = 44802
    title = "EVTNAME44802" #Peasant Army Under Zapata Joins the Revolucion
    desc = "EVTDESC44802"
    picture = "churchmexico"

     fire_only_once = yes

    trigger = {
        tag = MEX
        year = 1911
        has_country_flag = MaderoRevolt
        NOT = {
            year = 1915
            government = democracy
            government = hms_government
            government = constitutional_empire
        }
    }

    mean_time_to_happen = {
        months = 5
        modifier = {
            factor = 0.75 #increase likelihood to happen
            year = 1912
        }
        modifier = {
            factor = 0.95 #increase likelihood to happen
            year = 1913
        }
    }

    option = {
        name = "EVTOPTA44802" #Viva Zapata!
        2177 = { # N Oaxaca
            any_pop = {
                militancy = 8
            }
        }
        2178 = { #S Oaxaca
            any_pop = {
                militancy = 8
            }
        }
    }

}

country_event = {
    id = 44803
    title = "EVTNAME44803" #Jose Posada
    desc = "EVTDESC44803"
    picture = "Posada"

    fire_only_once = yes

    trigger = {
        tag = MEX
        has_country_flag = MaderoRevolt
        year = 1911
        NOT = {
            government = democracy
            government = hms_government
            government = constitutional_empire
            year = 1915
        }
    }

    mean_time_to_happen = {
        months = 5
        modifier = {
            factor = 0.75 #increase likelihood to happen
            year = 1912
        }
        modifier = {
            factor = 0.95 #increase likelihood to happen
            year = 1913
        }
    }

    option = {
        name = "EVTOPTA44803"
        farmers = {
            consciousness = 3
        }
        labourers = {
            consciousness = 3
        }
        craftsmen = {
            consciousness = 3
        }
        artisans = {
            consciousness = 3
        }
    }
}

country_event = {

    id = 44805
    title = "EVTNAME44805" #Antonio López de Santa Anna
    desc = "EVTDESC44805"
    picture = "antonio_lopez_de_santa_ana"
	fire_only_once = yes

    trigger = {
        tag = MEX
        government = democracy
        NOT = {
            year = 1855
			has_global_flag = eighteenthirty_startdate
        }
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "EVT44805OPTA"
        any_pop = {
            limit = {
                is_primary_culture = yes
                OR = {
                    type = soldiers
                    type = aristocrats
                    type = officers
                }
            }
            ideology = {
                value = reactionary
                factor = 0.7
            }
            ideology = {
                value = conservative
                factor = 0.3
            }
        }
        any_pop = {
            limit = {
                NOT = { type = soldiers }
                NOT = { type = aristocrats }
                NOT = { type = officers }
                is_primary_culture = yes
                location = {
                    OR = {
                        province_id = 2137
                        province_id = 2141
                        province_id = 2162
                        province_id = 2166
                        region = MEX_2172
                    }
                }
            }
            ideology = {
                value = liberal
                factor = 0.6
            }
            consciousness = 3
        }
		add_country_modifier = {
			name = bad_mexican_army
			duration = 4379
		}
        any_owned = {
            limit = { region = MEX_2172 }
            add_province_modifier = {
                name = peasant_revolt
                duration = 1095
            }
        }
		add_country_modifier = { name = fight_the_power duration = 3650 }
		add_country_modifier = { name = america_new_world duration = 5475 }
		add_country_modifier = {
			name = santa_ana_rule
			duration = -1
		}
    }
}

province_event = {

    id = 44810
    title = "EVTNAME44810" #Rebellion in $STATENAME$
    desc = "EVTDESC44810"

    trigger = {
        owner = {
            tag = MEX
            government = presidential_dictatorship
            has_country_modifier = fight_the_power
        }
        culture = mexican
        NOT = {
            has_province_modifier = peasant_revolt
            region = MEX_2159
        }
    }

    mean_time_to_happen = {
        months = 200
        modifier = {
            factor = 1.5
            has_country_flag = texas_recaptured
        }
        modifier = {
            factor = 0.5
            any_neighbor_province = { has_province_modifier = peasant_revolt }
        }
        modifier = {
            factor = 1.5
            reactionary = 20
        }
        modifier = {
            factor = 1.5
            reactionary = 30
        }
        modifier = {
            factor = 1.2
            conservative = 20
        }
        modifier = {
            factor = 1.2
            conservative = 30
        }
        modifier = {
            factor = 0.8
            liberal = 20
        }
        modifier = {
            factor = 0.8
            liberal = 30
        }
        modifier = {
            factor = 0.5
            is_colonial = yes
        }
        modifier = {
            factor = 2
            owner = { average_militancy = 2 }
        }
        modifier = {
            factor = 3
            owner = { average_militancy = 2.5 }
        }
        modifier = {
            factor = 5
            owner = { num_of_revolts = 1 }
        }
    }

    option = {
        name = "EVT44810OPTA"
        owner = {
            upper_house = {
                ideology = reactionary
                value = 0.4
            }
            rich_strata = {
                ideology = {
                    value = reactionary
                    factor = 0.2
                }
            }
        }
        state_scope = {
            any_owned = {
                add_province_modifier = {
                    name = peasant_revolt
                    duration = 1095
                }
            }
            farmers = {
                limit = { is_primary_culture = yes }
                militancy = 2
                consciousness = 4
            }
            labourers = {
                limit = { is_primary_culture = yes }
                militancy = 2
                consciousness = 4
            }
            artisans = {
                limit = { is_primary_culture = yes }
                militancy = 2
                consciousness = 4
            }
        }
    }
}

country_event = {

    id = 44815
    title = "EVTNAME44815" #Texas Recaptured!
    desc = "EVTDESC44815"
    picture = "1854_Alamo"

    fire_only_once = yes

    trigger = {
        tag = MEX
        war = no
        134 = { owned_by = MEX }
		year = 1836
		any_owned_province = { is_core = TEX }
		NOT = { exists = TEX }
    }

    option = {
        name = "EVT44815OPTA"
        set_country_flag = texas_recaptured
		remove_country_modifier = bad_mexican_army
        war_exhaustion = -30
        prestige = 10
		years_of_research = 2
        any_pop = {
            limit = { has_pop_culture = dixie }
            militancy = 10
            consciousness = 4
            dominant_issue = {
                value = yes_slavery
                factor = 0.25
            }
            ideology = {
                value = liberal
                factor = 0.4
            }
        }
		any_country = {
			limit = {
				is_greater_power = yes
				slavery = no_slavery
			}
			relation = {
				who = MEX
				value = 30
			}
		}
		any_country = {
			limit = {
				is_greater_power = yes
				OR = {
					slavery = yes_slavery
					slavery = freedom_of_womb
				}
			}
			relation = {
				who = MEX
				value = -15
			}
		}
        any_owned = {
            limit = {
                NOT = {
                    region = TEX_132
                    is_colonial = yes
                }
            }
            remove_province_modifier = peasant_revolt
            any_pop = { militancy = -4 }
        }
    }
}

country_event = {
    id = 44820
	picture = "RGR_flag_big"
    title = "EVTNAME44820" #Republic of the Rio Grande
    desc = "EVTDESC44820"
	major = yes

    fire_only_once = yes

    trigger = {
        tag = MEX
        is_vassal = no
        NOT = { exists = RGR }
		NOT = { centralization = federalism }
        any_owned_province = { is_core = RGR }
        year = 1840
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "EVT44820OPTA"
		war_exhaustion = 10
        any_owned = {
            limit = { is_core = RGR }
            secede_province = RGR
        }
        RGR = {
            any_pop = { militancy = -6 }
            relation = {
                who = USA
                value = 50
            }
            relation = {
                who = TEX
                value = 50
            }
            add_country_modifier = { name = unrecognized_country duration = 3650 }
        }
        war = {
            target = RGR
            attacker_goal = {
                casus_belli = annex_core_country
            }
        }
		RGR = {
            iron = 10
            wool = 10
            timber = 25
            small_arms = 10
            leadership = 20
            add_country_modifier = {
                name = small_country_draft
                duration = 365
            }
		}
        ai_chance = {
            factor = 1
        }
    }

    option = {
        name = "Freedom for the Riograndese! §BPlay as Rio Grande§W"
		war_exhaustion = 10
        any_owned = {
            limit = { is_core = RGR }
            secede_province = RGR
        }
        RGR = {
            any_pop = { militancy = -6 }
            relation = {
                who = USA
                value = 50
            }
            relation = {
                who = TEX
                value = 50
            }
            add_country_modifier = { name = unrecognized_country duration = 728 }
        }
        war = {
            target = RGR
            attacker_goal = {
                casus_belli = annex_core_country
            }
        }
        change_tag_no_core_switch = RGR
		RGR = {
            iron = 10
            wool = 10
            timber = 25
            small_arms = 10
            leadership = 20
            add_country_modifier = {
                name = small_country_draft
                duration = 365
            }
		}
        ai_chance = {
            factor = 0
        }
    }

    option = {
        name = "EVT44820OPTB"
        prestige = -15
        any_owned = {
            limit = { is_core = RGR }
            secede_province = RGR
        }
        RGR = {
            any_pop = { militancy = -6 }
            relation = {
                who = USA
                value = 50
            }
            relation = {
                who = TEX
                value = 50
            }
        }
        any_pop = {
            limit = { is_primary_culture = yes }
            militancy = 2
        }
        ai_chance = {
            factor = 0
        }
    }
}

country_event = {

    id = 44821
    title = "EVTNAME44821" #The Yucatan Republic
    desc = "EVTDESC44821"
    picture = "mexico_soldiers"

    fire_only_once = yes

    trigger = {
        tag = MEX
        is_vassal = no
		NOT = { centralization = federalism }
        NOT = { exists = YUC }
        any_owned_province = { is_core = YUC }
        year = 1841
    }

    mean_time_to_happen = {
        months = 3
    }

    option = {
        name = "EVT44820OPTA"
		war_exhaustion = 10
        any_owned = {
            limit = { is_core = YUC }
            secede_province = YUC
        }
        YUC = {
			iron = 10
			wool = 10
			timber = 25
			small_arms = 10
			leadership = 20
			add_country_modifier = {
				name = small_country_draft
				duration = 365
			}
            any_pop = { militancy = -6 }
        }
        war = {
            target = YUC
            attacker_goal = {
                casus_belli = annex_core_country
            }
        }
		random_owned = {
			limit = {
				owner = {
					owns = 2165
					TBS = { exists = no }
				}
			}
			owner = { country_event = { id = 960691 days = 60 } }
		}
        ai_chance = {
            factor = 90
            modifier = {
                factor = 0.25
                war = yes
            }
            modifier = {
                factor = 0.5
                num_of_revolts = 1
            }
        }
    }

    option = {
        name = "EVT44820OPTB"
        prestige = -15
        any_owned = {
            limit = { is_core = YUC }
            secede_province = YUC
        }
        YUC = {
            any_pop = { militancy = -6 }
        }
        any_pop = {
            limit = { is_primary_culture = yes }
            militancy = 2
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 1.5
                war = yes
            }
        }
    }
}

country_event = {

    id = 44822
    title = "EVTNAME44822" #Join the United Provinces?
    desc = "EVTDESC44822"
    picture = "mexico_soldiers"

    fire_only_once = yes

    trigger = {
        tag = YUC
        government = democracy
        is_vassal = no
        war = no
        UCA = {
            war = no
            neighbour = THIS
			government = democracy
            is_vassal = no
            has_country_flag = native_protection_act_enacted
            NOT = { citizens_rights = primary_culture_only }
            relation = { who = YUC value = 50 }
        }
        year = 1837
    }

    mean_time_to_happen = {
        months = 1
    }

    option = {
        name = "EVT44822OPTA"
        all_core = { add_core = UCA }
        random_country = {
            limit = {
                tag = UCA
                THIS = { ai = yes }
            }
            country_event = 16401
        }
        random_country = {
            limit = {
                tag = UCA
                THIS = { ai = no }
            }
            any_owned = { secede_province = YUC }
            YUC = {
                random_owned = {
                    limit = { province_id = 2186 }
                    owner = { capital = 2186 }
                }
                change_tag = UCA
                primary_culture = central_american
                add_accepted_culture = mayan
            }
        }
        ai_chance = {
            factor = 95
        }
    }

    option = {
        name = "EVT44822OPTB"
        prestige = 2
        ai_chance = {
            factor = 5
        }
    }
}

country_event = {

    id = 44825
    title = "EVTNAME44825" #The Treaty of Guadalupe Hidalgo
    desc = "EVTDESC44825"
    picture = "treaty"

    is_triggered_only = yes

    option = {
        name = "EVT44825OPTA"
        set_country_flag = treaty_of_guadalupe_hidalgo
		prestige = -50
        prestige_factor = -0.5
        treasury = 100000
        random_owned = {
            limit = {
                owner = { war_with = USA }
            }
            owner = { end_war = USA }
            any_country = {
                limit = {
                    war_with = THIS
                    alliance_with = USA
                }
                end_war = THIS
            }
        }
        all_core = {
            limit = {
                OR = {
                    region = TEX_132
                    region = MEX_94
					region = MEX_97
                    region = MEX_85
                    region = USA_106
                    region = USA_111
                    region = USA_126
                    region = USA_129
                    province_id = 100
                    province_id = 101
                    province_id = 103
                    province_id = 104
                    province_id = 105
                    province_id = 3589
                    province_id = 2148
                    province_id = 3588
                    province_id = 3460
                }
            }
            remove_core = MEX
        }
		any_owned = {
			limit = {
				OR = {
					is_core = USA
					region = TEX_132
					region = MEX_94
					region = MEX_97
					region = MEX_85
					region = USA_106
					region = USA_111
					region = USA_126
					region = USA_129
					province_id = 100
					province_id = 101
					province_id = 103
					province_id = 104
					province_id = 105
					province_id = 3589
					province_id = 2148
					province_id = 3588
					province_id = 3460
				}
			}
			secede_province = USA
		}
		USA = { country_event = 44826 }

        random_owned = {
            limit = { exists = CAL }
            owner = { end_war = CAL }
        }

        ai_chance = {
            factor = 90
        }
    }

    option = {
        name = "EVT44825OPTB"
        war_exhaustion = 20
		USA = { country_event = 44827 }
        ai_chance = {
            factor = 10
        }
    }
}

country_event = {

    id = 44826
    title = "EVTNAME44826" #Mexico Agrees
    desc = "EVTDESC44826"
    news = yes
    news_title = "EVTNAME44825"
    news_desc_long = "EVTDESC44826_NEWS_LONG"
    news_desc_medium = "EVTDESC44826_NEWS_MEDIUM"
    news_desc_short = "EVTDESC44826_NEWS_SHORT"
    picture = "treaty"

    is_triggered_only = yes

    option = {
        name = "EVT44826OPTA"
        prestige = 20
        random_owned = { limit = { owner = { ai = no } } owner = { treasury = -100000 } }
        random_owned = {
            limit = { owner = { ai = yes } }
            owner = { set_variable = { which = owed_cash_money value = 100 } }
        }
        any_owned = { limit = { is_core = MEX } secede_province = MEX }
        diplomatic_influence = {
            who = MEX
            value = 400
        }
        relation = {
            who = MEX
            value = 200
        }
        FROM = {
            any_owned = {
				limit = {
					OR = {
						is_core = USA
						region = TEX_132
						region = MEX_94
						region = MEX_97
						region = MEX_85
						region = USA_106
						region = USA_111
						region = USA_126
						region = USA_129
						province_id = 100
						province_id = 101
						province_id = 103
						province_id = 104
						province_id = 105
						province_id = 3589
						province_id = 2148
						province_id = 3588
					}
				}
				secede_province = USA
			}
        }
    }
}

country_event = {

    id = 44827
    title = "EVTNAME44827" #Mexico Refuses
    desc = "EVTDESC44827"
    picture = "treaty"

    is_triggered_only = yes

    option = {
        name = "EVT44827OPTA"
        set_country_flag = mexico_refused_treaty
        war_exhaustion = -20
    }
}

country_event = {

    id = 44830
    title = "EVTNAME44830" #Execution of Emperor Maximilian
    desc = "EVTDESC44830"
    news = yes
    news_desc_long = "EVTDESC44830"
    news_desc_medium = "EVTDESC44830_NEWS_MEDIUM"
    news_desc_short = "EVTDESC44830_NEWS_SHORT"
    picture = "death_of_max"
	fire_only_once = yes

    trigger = {
        tag = MEE
        government = constitutional_empire
        2172 = { controlled_by_rebels = yes }
        NOT = { year = 1890 }
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "EVT44830OPTA"
		change_tag = MEX
        government = democracy
        ruling_party_ideology = liberal

        add_country_modifier = {
            name = national_confusion
            duration = 365
        }
        any_pop = { militancy = -6 }
        2172 = { change_controller = MEX }
        random_owned = {
            limit = { exists = FRA }
            FRA = {
                relation = {
                    who = THIS
                    value = -50
                }
                diplomatic_influence = {
                    who = THIS
                    value = -100
                }
            }
        }
        random_owned = {
            limit = { exists = BOR }
            BOR = {
                relation = {
                    who = THIS
                    value = -50
                }
                diplomatic_influence = {
                    who = THIS
                    value = -100
                }
            }
        }
    }
}

country_event = {

    id = 44835
    title = "EVTNAME44835" #The Plan of Tuxtepec
    desc = "EVTDESC44835"
    news = yes
    news_desc_long = "EVTDESC44835"
    news_desc_medium = "EVTDESC44835_NEWS_MEDIUM"
    news_desc_short = "EVTDESC44835_NEWS_SHORT"
    picture = "Madero"

    fire_only_once = yes

    trigger = {
        tag = MEX
        war = no
		government = democracy
        year = 1876
        NOT = { year = 1877 }
		NOT = { has_global_flag = you_are_playing_mp }
		average_militancy = 4
    }

    mean_time_to_happen = {
        months = 1
    }

    option = {
        name = "EVT44835OPTB"
        prestige = -10
        government = presidential_dictatorship
		add_country_modifier = {
			name = porfiriato
			duration = -1
		}
        ruling_party_ideology = conservative
        political_reform = none_voting
        political_reform = party_appointed
        political_reform = no_meeting
        political_reform = state_press
        political_reform = state_controlled
        political_reform = underground_parties
        clr_country_flag = wants_to_unify
        clr_country_flag = does_not_want_to_unify
        clr_country_flag = rebels_in_capital
        capital_scope = {
            any_pop = {
                ideology = { factor = 0.1 value = reactionary }
            }
        }
        any_pop = {
            limit = { pop_majority_ideology = reactionary }
            ideology = { factor = 0.1 value = reactionary }
        }
        any_pop = {
            scaled_militancy = {
                ideology = reactionary
                factor = -8
            }
            scaled_militancy = {
                ideology = conservative
                factor = -4
            }
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = radical
                factor = 4
            }
        }
        any_owned = {
            remove_province_modifier = labor_union
            remove_province_modifier = militant_trade_union
            remove_province_modifier = worker_union
            remove_province_modifier = strike_solution
            remove_province_modifier = province_strike
            remove_province_modifier = may_day
        }
        random_country = {
            limit = {
                is_sphere_leader_of = THIS
                NOT = { is_our_vassal = THIS }
            }
            diplomatic_influence = {
                who = THIS
                value = -200
            }
            relation = {
                who = THIS
                value = -50
            }
            set_country_flag = former_sphere_leader
            leave_alliance = THIS
            country_event = 800056
        }
        random_country = {
            limit = { is_our_vassal = THIS }
            release_vassal = THIS
            leave_alliance = THIS
            diplomatic_influence = {
                who = THIS
                value = -200
            }
            relation = {
                who = THIS
                value = -50
            }
            set_country_flag = former_overlord
            country_event = 800055
        }
        any_country = {
            limit = {
                neighbour = THIS
                NOT = {
                    government = absolute_monarchy
                    government = absolute_empire
                    government = presidential_dictatorship
                }
            }
            any_pop = {
                scaled_militancy = {
                    ideology = reactionary
                    factor = 3
                }
            }
        }
        any_country = {
            limit = {
                is_greater_power = yes
                NOT = {
                    has_country_flag = former_sphere_leader
                    has_country_flag = former_overlord
                }
            }
            diplomatic_influence = {
                who = THIS
                value = -25
            }
            relation = {
                who = THIS
                value = -25
            }
        }
        any_country = {
            limit = {
                alliance_with = THIS
                NOT = {
                    ruling_party_ideology = reactionary
                    vassal_of = THIS
                    substate_of = THIS
                    in_sphere = THIS
                }
            }
            relation = { who = THIS value = -100 }
            leave_alliance = THIS
        }
        officers = {
            militancy = -6
            consciousness = -3
        }
        aristocrats = {
            militancy = -6
            consciousness = -3
        }
        soldiers = {
            militancy = -6
            consciousness = -3
        }
    }
}

#############################################################
#                                                            #
#                 War of Texas Independence Events            #
#                                                            #
#############################################################

country_event = {
    id = 44840
    title = "EVTNAME44840" #Santa Anna Captured!
    desc = "EVTDESC44840"
    picture = "surrender_of_santanna"

    trigger = {
        tag = TEX
        war_with = MEX
        national_provinces_occupied = 0.25
        any_owned_province = { country_units_in_province = MEX }
        NOT = { has_country_flag = santa_ana_captured }
		NOT = { has_global_flag = railroaded_mex_keeps_north_mexico }
		OR = {
			AND = {
				TEX = { ai = yes }
				MEX = { ai = yes }
			}
			AND = {
				any_owned_province = { country_units_in_province = TEX }
				NOT = { blockade = 1 }
			}
		}
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "EVT44840OPTA"
		government = democracy
        set_country_flag = santa_ana_captured
        MEX = { country_event = 44841 }
        ai_chance = {
            factor = 100
        }
    }

    option = {
        name = "EVT44840OPTB"
		government = democracy
        set_country_flag = santa_ana_captured
        war_exhaustion = -20
        MEX = { war_exhaustion = 40 }
        ai_chance = {
            factor = 0
        }
    }
}

country_event = {
    id = 44841
    title = "EVTNAME44840" #Santa Anna Captured! -- to MEX
    desc = "EVTDESC44841"
    news = yes
    news_title = "EVTNAME44807_NEWS_TITLE"
    news_desc_long = "EVTDESC44807_NEWS_LONG"
    news_desc_medium = "EVTDESC44807_NEWS_MEDIUM"
    news_desc_short = "EVTDESC44807_NEWS_SHORT"
    picture = "surrender_of_santanna"
    major = yes
    is_triggered_only = yes

    option = {
        name = "EVT44841OPTA"
        war_exhaustion = 20
        prestige = -25
        end_war = TEX
		any_country = {
			limit = {
				tag = USA
				ai = yes
			}
			end_war = THIS
		}
        TEX = {
            any_owned = {
                limit = { is_core = MEX }
                remove_core = MEX
            }
            country_event = 44842
        }
        add_country_modifier = {
            name = power_vacuum
            duration = 365
        }
        ai_chance = {
            factor = 0
        }
    }

    option = {
        name = "EVT44841OPTB"
        war_exhaustion = 40
        prestige = -10
        end_war = TEX
		any_country = {
			limit = {
				tag = USA
				ai = yes
			}
			end_war = THIS
		}
        TEX = { country_event = 44843 }
        add_country_modifier = {
            name = power_vacuum
            duration = 365
        }
        ai_chance = {
            factor = 1
        }
    }

    option = {
        name = "EVT44841OPTC"
        war_exhaustion = 60
        badboy = 5
        TEX = { country_event = 44844 }
        add_country_modifier = {
            name = power_vacuum
            duration = 365
        }
        ai_chance = {
            factor = 0
        }
    }
}

country_event = {
    id = 44842
    title = "EVTNAME44842" #The Treaties of Velasco
    desc = "EVTDESC44842"
    picture = "treaty_of_velasco"

    is_triggered_only = yes

    option = {
        name = "EVT44842OPTA"
        any_country = {
            limit = {
                alliance_with = MEX
                war_with = TEX
            }
            end_war = TEX
        }
        prestige = 10
        relation = { who = MEX value = 400 }
		random_owned = {
			limit = { owner = { USA = { exists = yes } } }
			owner = {
				USA = {
					diplomatic_influence = { who = TEX value = 600 }
					relation = { who = TEX value = 400 }
					relation = { who = MEX value = -50 }
					create_alliance = TEX
					leave_alliance = MEX
				}
			}
		}
        add_country_modifier = {
            name = treaties_of_velasco
            duration = 1825
        }
    }
}

country_event = {
    id = 44843
    title = "EVTNAME44843" #Ceasefire With Mexico
    desc = "EVTDESC44843"
    picture = "administration"

    is_triggered_only = yes

    option = {
        name = "EVT44843OPTA"
        any_country = {
            limit = {
                alliance_with = MEX
                war_with = TEX
            }
            end_war = TEX
        }
		random_owned = {
			limit = { owner = { USA = { exists = yes } } }
			owner = {
				USA = {
					diplomatic_influence = { who = TEX value = 600 }
					relation = { who = TEX value = 400 }
					relation = { who = MEX value = -50 }
					create_alliance = TEX
					leave_alliance = MEX
				}
			}
		}
        relation = { who = MEX value = 200 }
        add_country_modifier = {
            name = treaties_of_velasco
            duration = 1095
        }
    }
}


country_event = {
    id = 44844
    title = "EVTNAME44844" #Mexico Ignores the Treaties
    desc = "EVTDESC44844"
    picture = "treaty_of_velasco"

    is_triggered_only = yes

    option = {
        name = "EVT44844OPTA"
        war_exhaustion = -20
        random_owned = {
            limit = {
                is_capital = yes
                NOT = { controlled_by = THIS }
            }
            change_controller = TEX
        }
		random_owned = {
			limit = { owner = { USA = { exists = yes } } }
			owner = { USA = { country_event = 44846 } }
		}
        ai_chance = {
            factor = 100
        }
    }

    option = {
        name = "EVT44844OPTB"
        war_exhaustion = -20
        random_owned = {
            limit = {
                is_capital = yes
                NOT = { controlled_by = THIS }
            }
            change_controller = TEX
        }
        ai_chance = {
            factor = 0
        }
    }
}

country_event = {
    id = 44845
    title = "EVTNAME44845" #War With Mexico!
    desc = "EVTDESC44845"
    picture = "administration"

    trigger = {
        tag = TEX
        has_country_modifier = treaties_of_velasco
        part_of_sphere = no
        MEX = {
            war_with = TEX
            NOT = { war_with = USA }
        }
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "EVT44844OPTA"
        remove_country_modifier = treaties_of_velasco
		random_owned = {
			limit = { owner = { USA = { exists = yes } } }
			owner = { USA = { country_event = 44846 } }
		}
        ai_chance = {
            factor = 100
        }
    }

    option = {
        name = "EVT44844OPTB"
        remove_country_modifier = treaties_of_velasco
        ai_chance = {
            factor = 0
        }
    }
}

country_event = {
    id = 44846
    title = "EVTNAME44846" #The Texan Diplomat
    desc = "EVTDESC44846"
    picture = "administration"

    is_triggered_only = yes

    option = {
        name = "EVT44846OPTA"
        diplomatic_influence = { who = FROM value = 600 }
        relation = { who = FROM value = 400 }
        relation = { who = MEX value = -50 }
        create_alliance = FROM
        leave_alliance = MEX
        ai_chance = { factor = 75 }
    }

    option = {
        name = "EVT44846OPTB"
        diplomatic_influence = { who = FROM value = -100 }
        relation = { who = FROM value = -50 }
        relation = { who = MEX value = 50 }
        ai_chance = { factor = 25 }
    }
}

#The Death of Victorio
country_event = {
    id = 110053
    title = "EVTNAME110053"
    desc = "EVTDESC110053"
    picture = "MEX_victorio"

    trigger = {
        tag = MEX
        year = 1880
        owns = 2142
    }

    mean_time_to_happen = { months = 12 }
    fire_only_once = yes

    option = {
        name = "EVT110053OPTA" # He got what was coming!
        prestige = 2
        relation = { who = USA value = 30 }
        any_pop = {
            limit = { is_culture_group = native_american }
            militancy = 6
        }
    }
}

country_event = {
    id = 111010
    title = "The Revolution of Ayutla"
    desc = "Santa Anna has become deeply unpopular with the Mexican people and general staff, leading to a revolution by Juan Álvarez, Tomás Moreno, and Nicolás Bravo to depose him. Without support, he was ousted almost bloodlessly."
    picture = "plan_ayutla"

    trigger = {
        tag = MEX
        year = 1854
		OR = {
			has_country_modifier = santa_ana_rule
			has_country_flag = plan_de_hospicio
		}
    }

    mean_time_to_happen = { months = 4 }
    fire_only_once = yes

    option = {
        name = "EVT110053OPTA" # He got what was coming!
		remove_country_modifier = santa_ana_rule
		ruling_party_ideology = liberal
		government = democracy
		set_country_flag = do_1857_constitution
    }
}

country_event = {
    id = 111011
    title = "The Reform War"
    desc = "Our recent reforms have caused outrage among the conservative and religious populace, with the pope excommunicating anyone who accepts the constitution. This has led to a conservative uprising."
    picture = "reformist_war"
    is_triggered_only = yes
    fire_only_once = yes
    option = {
        name = "We shall defend the constitution!"
		war_exhaustion = 30
		all_core = { add_core = MEE }
		set_global_flag = reform_war
		any_owned = {
			limit = {
				OR = {
					province_id = 3456
					province_id = 2140
					province_id = 2137
					province_id = 2141
					province_id = 2157
					province_id = 2156
					province_id = 2143
					province_id = 2144
					province_id = 2142
					province_id = 2145
					province_id = 2154
					province_id = 2153
					province_id = 2183
					province_id = 2185
					province_id = 2184
					province_id = 2165
					province_id = 2181
					province_id = 3402
					province_id = 3615
					province_id = 2182
					province_id = 2177
					province_id = 2178
					province_id = 2159
					province_id = 2173
					province_id = 2176
					province_id = 2174
					province_id = 2175
					province_id = 2172
					province_id = 2662
					province_id = 102
				}
			}
			secede_province = MEE
		}
		MEE = { capital = 2172 }
		define_general = { name = "Ignacio Zaragoza" personality = defence_5.1 background = attack_5.1 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = civil_war }
			defender_goal = { casus_belli = civil_war }
			call_ally = no
		}
		MEE = { government = prov_gov_conservative }
		ai_chance = { factor = 1 }
    }
	option = {
        name = "Depose these heathens! §BPlay as the Conservatives§W"
		war_exhaustion = 30
		all_core = { add_core = MEE }
		set_global_flag = reform_war
		any_owned = {
			limit = {
				OR = {
					province_id = 3456
					province_id = 2140
					province_id = 2137
					province_id = 2141
					province_id = 2157
					province_id = 2156
					province_id = 2143
					province_id = 2144
					province_id = 2142
					province_id = 2145
					province_id = 2154
					province_id = 2153
					province_id = 2183
					province_id = 2185
					province_id = 2184
					province_id = 2165
					province_id = 2181
					province_id = 3402
					province_id = 3615
					province_id = 2182
					province_id = 2177
					province_id = 2178
					province_id = 2159
					province_id = 2173
					province_id = 2176
					province_id = 2174
					province_id = 2175
					province_id = 2172
					province_id = 2662
					province_id = 102
				}
			}
			secede_province = MEE
		}
		MEE = { capital = 2172 }
		define_general = { name = "Ignacio Zaragoza" personality = defence_5.1 background = attack_5.1 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = civil_war }
			defender_goal = { casus_belli = civil_war }
			call_ally = no
		}
		MEE = { government = prov_gov_conservative }
		change_tag_no_core_switch = MEE
		ai_chance = { factor = 1 }
    }
}

country_event = {
    id = 111012
    title = "France proposes intervention in Mexico"
    desc = "In the Reform War, both sides of the civil war went into deep debt with us and France. The liberal government is refusing to pay the rebels' debts, therefore France is calling for intervention."
    picture = "deliberation"
    is_triggered_only = yes
    option = {
        name = "No blood will be spilled over Mexico."
		FRA = { country_event = 111013 }
		relation = { who = FRA value = -50 }
		ai_chance = { factor = 0 }
    }
	option = {
        name = "An excellent proposal!"
		FRA = { country_event = 111014 }
		country_event = { id = 111024 days = 7 }
		set_country_flag = helping_in_the_mex_intervention
		ai_chance = { factor = 1 }
    }
}

country_event = {
    id = 111013
    title = "$FROMCOUNTRY$ declines intervention in Mexico"
    desc = "Following our proposal to land in Mexico to impose debt payments, $FROMCOUNTRY$ has refused to participate."
    picture = "deliberation"
    is_triggered_only = yes
    fire_only_once = yes
    option = {
        name = "We don't need them!"
    }
}
country_event = {
    id = 111014
    title = "$FROMCOUNTRY$ joins intervention in Mexico"
    desc = "Following our proposal to land in Mexico to impose debt payments, $FROMCOUNTRY$ has agreed to participate."
    picture = "deliberation"
    is_triggered_only = yes
    fire_only_once = yes
    option = {
        name = "Welcome aboard!"
    }
}
country_event = {
    id = 111015
    title = "The Intervention"
    desc = "Now that our negotiations with Spain and Britain are finished, the time has come to impose our will on Mexico!"
    picture = "french_mee"
    is_triggered_only = yes
    fire_only_once = yes
    option = {
        name = "Vive la France!"
		random_owned = {
			limit = {
				owner = {
					MEX = { ai = yes }
					USA = { ai = yes }
					OR = {
						MEX = { alliance_with = USA }
						MEX = { in_sphere = USA }
					}
				}
			}
			owner = {
				USA = { leave_alliance = MEX diplomatic_influence = { who = MEX value = -200 } }
			}
		}
		casus_belli = { target = MEX type = cut_down_to_size months = 36 }
		war = {
			target = MEX
			attacker_goal = { casus_belli = cut_down_to_size }
			defender_goal = { casus_belli = status_quo }
			call_ally = no
		}
		MEX = { country_event = 111016 }
    }
}
country_event = {
    id = 111016
    title = "The French intervention"
    desc = "During the Reform War, both us liberals and the conservatives went into debt with foreign powers. Our refusal to pay the rebels' debts has lead to the French invading us to enforce payments."
    picture = "french_mee"
    is_triggered_only = yes
    fire_only_once = yes
    option = {
        name = "We will fight tooth and nail!"
    }
}

country_event = {
    id = 111017
    title = "The Capture of Mexico City"
    desc = "Our troops triumphantly marched into Mexico City this morning. We could end the war and enforce the debts now, but we could also push our gains and attempt to install Maximilian von Habsburg as emperor of Mexico."
    picture = "french_entry_mexico_city"

    trigger = {
        tag = FRA
        OR = {
			2172 = { controlled_by = FRA }
			2172 = { controlled_by = SPA }
			2172 = { controlled_by = SPC }
			2172 = { controlled_by = ENG }
		}
		has_global_flag = french_intervention_in_mexico
    }

    mean_time_to_happen = { days = 1 }
    fire_only_once = yes

    option = {
        name = "We will settle for the debts."
		any_country = {
			limit = {
				has_country_flag = helping_in_the_mex_intervention
			}
			country_event = 111018
		}
		MEX = { country_event = 111019 }
		end_war = MEX
		relation = { who = MEX value = 200 }
		treasury = 80000
    }

	option = {
        name = "Mexico will be subjugated! §RGain 8 infamy§W"
		badboy = 8
		set_country_flag = installing_max
		any_owned = {
			limit = {
				OR = {
					province_id = 2184
					province_id = 2165
					province_id = 2164
					province_id = 2162
					province_id = 2163
					province_id = 2175
					province_id = 2172
					province_id = 2173
				}
			}
			secede_province = MEE
		}
		MEX = { all_core = { add_core = MEE } }
		MEE = {
			government = semi_constitutional_empire
			ruling_party_ideology = conservative
			political_reform = non_secret_ballots
			political_reform = culture_voting_only
			political_reform = non_socialist
			political_reform = censored_press
			political_reform = yes_meeting
			political_reform = state_equal_weight
			political_reform = wealth_voting
		}
		create_alliance = MEE
		diplomatic_influence = { who = MEE value = 400 }
		relation = { who = MEE value = 400 }
		any_country = {
			limit = {
				has_country_flag = helping_in_the_mex_intervention
			}
			country_event = 111020
		}
		MEX = { country_event = 111021 }
    }
}

country_event = {
    id = 111018
    title = "The Capture of Mexico City"
    desc = "With the capture of Mexico City, the war is won and we can make our demands to Mexico."
    picture = "french_entry_mexico_city"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "Splendid!"
		MEX = { country_event = 111019 }
		end_war = MEX
		relation = { who = MEX value = 200 }
		treasury = 80000
    }
}

country_event = {
    id = 111019
    title = "The Capture of Mexico City"
    desc = "With the fall of our capital, we are left with no choice but to pay our debts."
    picture = "french_entry_mexico_city"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "We won't forget this!"
		treasury = -80000
    }
}

country_event = {
    id = 111020
    title = "France's ulterior motives"
    desc = "It has come to light that France intends to impose Maximilian von Habsburg as their puppet ruler of Mexico. We shan't lose lives aiding French opportunism!"
    picture = "french_entry_mexico_city"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "They were planning this all along!"
		end_war = MEX
		relation = { who = MEX value = 200 }
		relation = { who = FRA value = -50 }
    }
}

country_event = {
    id = 111021
    title = "The Capture of Mexico City"
    desc = "Our capital has fallen, and Maximilian I has been crowned as France's puppet emperor. His government has taken office, beginning new reforms unpopular with both conservatives and liberals."
    picture = "french_entry_mexico_city"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "We will fight to the death!"
		war_exhaustion = 30
		any_owned = {
			limit = {
				OR = {
					province_id = 2184
					province_id = 2165
					province_id = 2164
					province_id = 2162
					province_id = 2163
					province_id = 2175
					province_id = 2172
					province_id = 2173
				}
			}
			secede_province = MEE
		}
		MEE = { capital = 2172 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = annex_core_country }
		}
		add_country_modifier = {
			name = all_or_nothing
			duration = 730
		}
		set_country_flag = cinco_del_mayo_can_happen
    }
}

country_event = {
    id = 111022
    title = "La Batalla de Puebla"
    desc = "Our troops have recaptured Mexico City, expelling the French invaders and the government of Maximilian I. General Ignacio Zaragoza has won against all odds."
    picture = "execution_of_emperor_maximillian"

    trigger = {
        tag = MEX
		has_global_flag = french_intervention_in_mexico
		has_country_flag = cinco_del_mayo_can_happen
		exists = yes
		OR = {
			2172 = { controlled_by = MEX }
			AND = {
				exists = MEE
				MEE = { war = no }
			}
		}
    }

    mean_time_to_happen = { days = 1 }
    fire_only_once = yes

    option = {
        name = "Huzzah!"
		end_war = MEE
		MEE = { all_core = { remove_core = MEE } }
		MEE = { annex_to = MEX }
		FRA = { country_event = 111023 }
		country_event = 44830
    }
}

country_event = {
    id = 111023
    title = "Cinco del Mayo"
    desc = "Mexico has recaptured Mexico City, executing Maximilian and his government and routing our forces. We have no choice but to retreat."
    picture = "death_of_max"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "Sacré Bleu!"
		end_war = MEX
		relation = { who = MEX value = 200 }
    }
}

country_event = {
    id = 111024
    title = "The Intervention"
    desc = "Now that the negotiations with France are finished, the time has come to invade Mexico to enforce its debts."
    picture = "french_mee"
	is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = "All aboard the transports!"
		casus_belli = { target = MEX type = war_reparations months = 36 }
		war = {
			target = MEX
			attacker_goal = { casus_belli = war_reparations }
			defender_goal = { casus_belli = status_quo }
			call_ally = no
		}
    }
}