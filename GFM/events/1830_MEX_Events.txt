#4207028: Anastasio Bustamante pronounced president
#4207029: The Plan of Codallos
#Three outcomes for the civil war:
#4207083: Stalemate and armistice
#4207084: The Capture and Execution of Vicente Guerrero
#4207103, 4207031: possible Bustamante surrender, Guerrero victory

#4207056: The Law of April

#42070321: Alternate Plan of Veracruz after Guerrero victory
#42070311: Vicente Guerrero's final Triumph
#42070312: Vicente Guerrero's Defeat

#4207032: The Plan of Veracruz
#Two outcomes for the civil war:
#42071031, 4207033: possible Bustamante surrender, liberal victory
#4208033: conservative victory
#4207034: Plan of Cuernavaca in case of liberal victory


#183536: Siete Leyes in case of Plan of Cuernavaca or conservative victory

#Singular flavor events without further impact:
#4206995: Las Grutas de Cacahuamilpa
#4206992: El Periquillo Sarniento

#Day 1 event for 1830 Mexico about Bustamante, triggered by Setup.txt
country_event = {
	id = 4207028
	title = "Anastasio Bustamante pronounced President"
	desc = "EVTDESC4207028"
	picture = "bustamante_event"
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = "We'll see how this goes."
		add_country_modifier = {
			name = bustamante_rule
			duration = -1
		}
		add_country_modifier = {
			name = national_instability
			duration = 365
		}
		ruling_party_ideology = conservative
	}
}

#The Plan of Codallos in 1830 begins the civil war between Bustamante and Guerrero
country_event = {
	id = 4207029
	title = "The Plan of Codallos"
	desc = "EVTDESC4207029"
	picture = "juan_jose_codallos"
	fire_only_once = yes

	trigger = {
		tag = MEX
		year = 1830
		month = 2
		NOT = { exists = MEE }
		NOT = { year = 1832 }
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Bustamante is the legitimate president!"
		any_pop = {
			scaled_militancy = {
				ideology = liberal
				factor = 3
			}
		}
		any_pop = {
			scaled_militancy = {
				ideology = radical
				factor = 6
			}
		}
		war_exhaustion = 10
		set_global_flag = guerrero_rebellion
		any_owned = {
			limit = {
				OR = {
					province_id = 2168
					province_id = 2169
					province_id = 2166
					province_id = 2171
					province_id = 2170
					province_id = 2180
					province_id = 2179
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			government = prov_gov_liberal
			ruling_party_ideology = liberal
			define_general = { name = "Vicente Guerrero" personality = defence_4.2 background = attack_3.5 }
			define_general = { name = "Juan José Codallos Núñez" personality = defence_2.1 background = attack_2.1 }
			define_general = { name = "José Francisco Gordiano Guzmán" personality = defence_1.1 background = attack_1.1 }
			define_general = { name = "Juan Álvarez Hurtado" personality = defence_2.1 background = attack_3.1 }
			define_general = { name = "José Trinidad Salgado Rentería" personality = defence_3.1 background = attack_1.1 }
			add_accepted_culture = afro_latino
			add_accepted_culture = nahua
			political_reform = closed_borders
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cavalry value = current }
				sub_unit = { type = irregular value = current }
				sub_unit = { type = irregular value = current }
			}
		}
		casus_belli = { target = MEE type = annex_core_country months = 12 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = annex_core_country }
			defender_goal = { casus_belli = conquest_any }
		}
		ai_chance = { factor = 1 }
	}

	option = {
		name = "Glory to President Guerrero! §BPlay as Revolt§W"
		any_pop = {
			scaled_militancy = {
				ideology = liberal
				factor = 3
			}
		}
		any_pop = {
			scaled_militancy = {
				ideology = radical
				factor = 6
			}
		}
		war_exhaustion = 10
		set_global_flag = guerrero_rebellion
		any_owned = {
			limit = {
				OR = {
					province_id = 2168
					province_id = 2169
					province_id = 2166
					province_id = 2171
					province_id = 2170
					province_id = 2180
					province_id = 2179
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			government = prov_gov_liberal
			ruling_party_ideology = liberal
			define_general = { name = "Vicente Guerrero" personality = defence_4.2 background = attack_3.5 }
			define_general = { name = "Juan José Codallos Núñez" personality = defence_2.1 background = attack_2.1 }
			define_general = { name = "José Francisco Gordiano Guzmán" personality = defence_1.1 background = attack_1.1 }
			define_general = { name = "Juan Álvarez Hurtado" personality = defence_2.1 background = attack_3.1 }
			define_general = { name = "José Trinidad Salgado Rentería" personality = defence_3.1 background = attack_1.1 }
			add_accepted_culture = afro_latino
			add_accepted_culture = nahua
			political_reform = closed_borders
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cavalry value = current }
				sub_unit = { type = irregular value = current }
				sub_unit = { type = irregular value = current }
			}
		}
		casus_belli = { target = MEE type = conquest months = 12 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = conquest }
			defender_goal = { casus_belli = conquest }
			call_ally = no
		}
		change_tag_no_core_switch = MEE
		ai_chance = { factor = 0 }
	}
}

#Vicente Guerrero achieves an Armistice when he white peaces Mexico
country_event = {
	id = 4207083
	title = "Vicente Guerrero achieves an Armistice!"
	desc = "GUERREROTRUCE"
	picture = "guerrero2"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_rebellion
		tag = MEE
		exists = MEX
		NOT = { government = colonial_company_4 } #sanity check
		is_vassal = no
		NOT = { war_with = MEX }
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Our hero is back!"
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = open_borders
			all_core = { remove_core = MEE }
		}
		inherit = MEX
		clr_global_flag = guerrero_rebellion
		set_global_flag = guerrero_draw
		prestige = 5
		change_tag = MEX
		government = prov_gov_conservative
		ruling_party_ideology = conservative
		any_pop = { scaled_militancy = { ideology = conservative factor = 4 } scaled_militancy = { ideology = reactionary factor = 6 } scaled_consciousness = { ideology = liberal factor = 4 } scaled_consciousness = { ideology = conservative factor = 6 } scaled_consciousness = { ideology = reactionary factor = 8 } }
		add_country_modifier = { name = guerrero_compromise duration = 730 }
		add_country_modifier = { name = national_instability duration = 730 }
		add_country_modifier = { name = national_confusion duration = 730 }
		remove_country_modifier = bustamante_rule
		remove_country_modifier = santa_ana_rule
		capital = 2172
		MEE = { all_core = { remove_core = MEE } }
		political_reform = no_slavery
		political_reform = federalism
		political_reform = wealth_voting
		political_reform = harassment
		political_reform = state_equal_weight
		political_reform = first_past_the_post
		political_reform = peonage
		political_reform = restricted_meeting
		political_reform = free_press
		political_reform = open_borders
		political_reform = culture_voting_only
	}
}

#The Capture and Execution of Vicente Guerrero fires if Mexico annexes the revolt or if the revolt is AI, it is February 1831, Mexico controls Mexico City and is still at war with the revolt
country_event = {
	id = 4207084
	title = "The Capture and Execution of Vicente Guerrero"
	desc = "EVTDESC4207030"
	picture = "guerrero2"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_rebellion
		tag = MEX
		OR = {
			AND = {
				war_with = MEE
				exists = MEE
				year = 1831
				month = 2
				MEE = { ai = yes }
				2172 = { controlled_by = MEX }
			}
			MEE = { exists = no }
		}
		MEE = { NOT = { government = colonial_company_4 } } #sanity check
		NOT = { year = 1835 }
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Gentlemen, we got him."
		clr_global_flag = guerrero_rebellion
		remove_country_modifier = relutanct_figher
		inherit = MEE
		any_pop = {
			scaled_consciousness = {
				ideology = liberal
				factor = 3
			}
		}
		any_pop = {
			scaled_consciousness = {
				ideology = radical
				factor = 6
			}
		}
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = open_borders
			all_core = { remove_core = MEE }
		}
	}
}

#Bustamante surrenders if Guerrero occupies Mexico City and Mexico has no army left, ending the war and annexing Mexico to the revolt
country_event = {
	id = 4207103
	title = "Bustamante surrenders!"
	desc = "EVTDESC4207103"
	picture = "mex_city"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_rebellion
		tag = MEE
		war_with = MEX
		OR = { #To prevent cheesing by deleting the Mexican army before the war
			AND = {
				year = 1830
				month = 9
			}
			year = 1831
		}
		2172 = { controlled_by = THIS }
		NOT = { MEX = { total_amount_of_divisions = 1 } }
	}

	option = {
		name = "Hurrah!"
		end_war = MEX
		inherit = MEX
	}
}

#Vicente Guerrero assumes the presidency if Mexico does not exist (i.e. the revolt annexed it by war or the event above)
country_event = {
	id = 4207031
	title = "Vicente Guerrero assumes the Presidency"
	desc = "EVTDESC4207031"
	picture = "guerrero2"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_rebellion
		tag = MEE
		NOT = { exists = MEX }
		NOT = { government = colonial_company_4 } #sanity check
		is_vassal = no
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Our hero is back!"
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = open_borders
			all_core = { remove_core = MEE }
		}
		clr_global_flag = guerrero_rebellion
		set_global_flag = guerrero_wins
		prestige = 5
		change_tag = MEX
		government = prov_gov_liberal
		remove_country_modifier = military_fueros
		ruling_party_ideology = liberal
		any_pop = { scaled_militancy = { ideology = conservative factor = 8 } scaled_militancy = { ideology = reactionary factor = 8 } scaled_consciousness = { ideology = liberal factor = 2 } scaled_consciousness = { ideology = conservative factor = 8 } scaled_consciousness = { ideology = reactionary factor = 10 } }
		add_country_modifier = { name = guerrero_victory duration = 730 }
		add_country_modifier = { name = national_instability duration = 730 }
		add_country_modifier = { name = national_confusion duration = 730 }
		remove_country_modifier = bustamante_rule
		remove_country_modifier = santa_ana_rule
		capital = 2172
		MEE = { all_core = { remove_core = MEE } }
		political_reform = no_slavery
		political_reform = federalism
		political_reform = wealth_voting
		political_reform = harassment
		political_reform = state_equal_weight
		political_reform = first_past_the_post
		political_reform = peonage
		political_reform = restricted_meeting
		political_reform = free_press
		political_reform = open_borders
		political_reform = culture_voting_only
	}
}

#Fires in April 1830 if Guerrero hasn't won or had a draw
country_event = {
	id = 4207056
	title = "The Law of April"
	desc = "EVTDESC4207056"
	picture = "bustamante_event"
	fire_only_once = yes

	trigger = {
		tag = MEX
		has_country_flag = MEX_colonization_law
		has_global_flag = eighteenthirty_startdate
		OR = {
			has_country_modifier = colonization_law_mex
			any_owned_province = { has_province_modifier = colonization_law_mex_prov_big }
		}
		NOT = { has_global_flag = guerrero_wins }
		NOT = { has_global_flag = guerrero_draw }
		NOT = { has_country_flag = no_ley_de_abril }
		month = 4
	}

	mean_time_to_happen = { days = 6 }

	option = {
		name = "We must protect Mexican sovereignty."
		clr_country_flag = MEX_colonization_law
		any_owned = {
			limit = {
				OR = {
					has_province_modifier = colonization_law_mex_prov_big
				}
			}
			remove_province_modifier = colonization_law_mex_prov_big
		}
		remove_country_modifier = colonization_law_mex
	}
}

#Alternate Plan of Veracruz fires after Guerrero wins/compromises, launches second Guerrero civil war
country_event = {
	id = 42070321
	title = "The Plan of Veracruz"
	desc = "ALTERNATEVERACRUZ"
	picture = "santa_anna_veracruz"
	fire_only_once = yes

	trigger = {
		tag = MEX
		OR = {
			has_global_flag = guerrero_wins
			has_global_flag = guerrero_draw
		}
		NOT = {
			has_country_modifier = national_instability
			exists = MEE
		}
		year = 1832
		owns = 2162
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Guerrero is our only hope!"
		government = prov_gov_liberal
		war_exhaustion = 30
		set_global_flag = guerrero_round_two
		any_owned = {
			limit = {
				OR = {
					province_id = 2182
					province_id = 2181
					province_id = 3615
					province_id = 3975
					province_id = 2178
					province_id = 2177
					province_id = 2164
					province_id = 2175
					province_id = 2162
					province_id = 2163
					province_id = 2173
					province_id = 2167
					province_id = 2159
					province_id = 2176
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		random_owned = {
			limit = {
				owner = {
					has_global_flag = guerrero_draw
				}
			}
			owner = {
				any_owned = {
					limit = {
						OR = {
							province_id = 2161
							province_id = 2153
							province_id = 2154
							province_id = 3973
							province_id = 2144
							province_id = 2145
							province_id = 2142
							province_id = 2143
						}
					}
					add_core = MEE
					secede_province = MEE
				}
			}
		}
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = closed_borders
			capital = 2162
			add_country_modifier = {
				name = small_country_draft
				duration = 365
			}
			ruling_party_ideology = conservative
			government = prov_gov_conservative
			define_general = { name = "Antonio López de Santa Anna" personality = defence_minus_1.101 background = attack_3.5 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
				sub_unit = { type = dragoon value = current }
			}
			2176 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
				sub_unit = { type = dragoon value = current }
			}
			2159 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
			}
			2181 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
			}
		}
		add_country_modifier = { name = relutanct_figher duration = 365 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = conquest_any }
			defender_goal = { casus_belli = conquest_any }
		}
		ai_chance = { factor = 1 }
	}

	option = {
		name = "This madness must end now! §BPlay as Revolt§W"
		government = prov_gov_liberal
		war_exhaustion = 30
		set_global_flag = guerrero_round_two
		any_owned = {
			limit = {
				OR = {
					province_id = 2182
					province_id = 2181
					province_id = 3615
					province_id = 3975
					province_id = 2178
					province_id = 2177
					province_id = 2164
					province_id = 2175
					province_id = 2162
					province_id = 2163
					province_id = 2173
					province_id = 2167
					province_id = 2159
					province_id = 2176
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		random_owned = {
			limit = {
				owner = {
					has_global_flag = guerrero_draw
				}
			}
			owner = {
				any_owned = {
					limit = {
						OR = {
							province_id = 2161
							province_id = 2153
							province_id = 2154
							province_id = 3973
							province_id = 2144
							province_id = 2145
							province_id = 2142
							province_id = 2143
						}
					}
					add_core = MEE
					secede_province = MEE
				}
			}
		}
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = closed_borders
			capital = 2162
			add_country_modifier = {
				name = small_country_draft
				duration = 365
			}
			ruling_party_ideology = conservative
			government = prov_gov_conservative
			define_general = { name = "Antonio López de Santa Anna" personality = defence_minus_1.101 background = attack_3.5 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
				sub_unit = { type = dragoon value = current }
			}
			2176 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
				sub_unit = { type = dragoon value = current }
			}
			2159 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
			}
			2181 = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
			}
		}
		add_country_modifier = { name = relutanct_figher duration = 365 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = conquest_any }
			defender_goal = { casus_belli = conquest_any }
		}
		change_tag_no_core_switch = MEE
		ai_chance = { factor = 0 }
	}
}

#Vicente Guerrero's final Triumph occurs if MEX annexes MEE in the alternate Plan of Veracruz
country_event = {
	id = 42070311
	title = "Vicente Guerrero's final Triumph"
	desc = "GUERREROTRIUMPH"
	picture = "vicente_guerrero"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_round_two
		tag = MEX
		NOT = { exists = MEE }
		NOT = { government = colonial_company_4 }
		is_vassal = no
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Viva! Viva! Viva!"
		any_pop = { militancy = -6 }
		clr_global_flag = guerrero_round_two
		set_global_flag = guerrero_big_win
		MEE = { all_core = { remove_core = MEE } }
		remove_country_modifier = military_fueros
		government = democracy
		ruling_party_ideology = liberal
		political_reform = no_slavery
		political_reform = federalism
		random_owned = { limit = { owner = { school_reforms = no_schools } } owner = { social_reform = low_schools } }
		political_reform = universal_voting
		political_reform = non_secret_ballots
		political_reform = population_equal_weight
		political_reform = proportional_representation
		political_reform = debtors_prisons
		political_reform = yes_meeting
		political_reform = free_press
		political_reform = open_borders
		political_reform = all_voting_pops
		nationalvalue = nv_equality
		add_country_modifier = { name = america_new_world duration = 3650 } #do not increase this or else
		add_country_modifier = { name = guerrero_final_victory duration = 2190 }
		add_accepted_culture = afro_latino
		country_event = 9375935
		treasury = 100000 #This money goes for the factories
		random_owned = { limit = { province_id = 2176 state_scope = { NOT = { has_building = artillery_factory } } } owner = { capital = 2176 build_factory_in_capital_state = artillery_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2142 state_scope = { NOT = { has_building = canned_food_factory } } } owner = { capital = 2142 build_factory_in_capital_state = canned_food_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2176 state_scope = { NOT = { has_building = ammunition_factory } } } owner = { capital = 2176 build_factory_in_capital_state = ammunition_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2176 state_scope = { NOT = { has_building = regular_clothes_factory } } } owner = { capital = 2176 build_factory_in_capital_state = regular_clothes_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2150 state_scope = { NOT = { has_building = canned_food_factory } } } owner = { capital = 2150 build_factory_in_capital_state = canned_food_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2162 state_scope = { NOT = { has_building = clipper_shipyard } } } owner = { capital = 2162 build_factory_in_capital_state = clipper_shipyard } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2183 state_scope = { NOT = { has_building = liquor_distillery } } } owner = { capital = 2183 build_factory_in_capital_state = liquor_distillery } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2179 state_scope = { NOT = { has_building = liquor_distillery } } } owner = { capital = 2179 build_factory_in_capital_state = liquor_distillery } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2137 state_scope = { NOT = { has_building = canned_food_factory } } } owner = { capital = 2137 build_factory_in_capital_state = canned_food_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2181 state_scope = { NOT = { has_building = liquor_distillery } } } owner = { capital = 2181 build_factory_in_capital_state = liquor_distillery } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2158 state_scope = { NOT = { has_building = steel_factory } } } owner = { capital = 2158 build_factory_in_capital_state = steel_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2166 state_scope = { NOT = { has_building = small_arms_factory } } } owner = { capital = 2166 build_factory_in_capital_state = small_arms_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
		random_owned = { limit = { province_id = 2166 state_scope = { NOT = { has_building = furniture_factory } } } owner = { capital = 2166 build_factory_in_capital_state = furniture_factory } }
		random_owned = { limit = { province_id = 2172 } THIS = { capital = 2172 } }
	}
}

#Vicente Guerrero's Defeat occurs if MEE annexes or white peaces MEX in the alternate Plan of Veracruz
country_event = {
	id = 42070312
	title = "Vicente Guerrero's Defeat"
	desc = "GUERRERODEFEAT"
	picture = "vicente_guerrero"
	fire_only_once = yes

	trigger = {
		has_global_flag = guerrero_round_two
		tag = MEE
		OR = {
			NOT = { exists = MEX }
			MEX = { exists = yes war = no }
		}
		NOT = { government = colonial_company_4 } #sanity check
		is_vassal = no
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "These are dark times..."
		clr_global_flag = guerrero_round_two
		MEX = { remove_country_modifier = relutanct_figher }
		inherit = MEX
		any_pop = {
			scaled_consciousness = {
				ideology = liberal
				factor = 3
			}
		}
		any_pop = {
			scaled_consciousness = {
				ideology = radical
				factor = 6
			}
		}
		MEE = {
			political_reform = open_borders
			all_core = { remove_core = MEE }
		}
		change_tag = MEX
		set_global_flag = plan_of_cuernavaca
		MEX = {
			government = presidential_dictatorship
			political_reform = none_voting
			political_reform = state_press
			political_reform = no_meeting
			social_reform = no_schools
			ruling_party_ideology = conservative
			add_country_modifier = { name = military_fueros duration = -1 }
			add_country_modifier = {
				name = santa_ana_rule
				duration = -1
			}
		}
	}
}

#The Veracruz Plan fires in 1832 for Mexico still under Bustamante, i.e. Guerrero failed
country_event = {
	id = 4207032
	title = "The Plan of Veracruz"
	desc = "EVTDESC4207032"
	picture = "santa_anna_veracruz"
	fire_only_once = yes

	trigger = {
		tag = MEX
		has_country_modifier = bustamante_rule
		NOT = { exists = MEE }
		year = 1832
		NOT = { year = 1835 }
		owns = 2162
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Once again, we will defend Bustamante's rule!"
		war_exhaustion = 30
		set_global_flag = veracruz_plan
		any_owned = {
			limit = {
				OR = {
					province_id = 2168
					province_id = 2169
					province_id = 2170
					province_id = 2171
					province_id = 2166
					province_id = 2160
					province_id = 2158
					province_id = 2167
					province_id = 2173
					province_id = 2175
					province_id = 2162
					province_id = 2174
					province_id = 2163
					province_id = 2176
					province_id = 2159
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = closed_borders
			capital = 2162
			add_country_modifier = {
				name = small_country_draft
				duration = 365
			}
			ruling_party_ideology = liberal
			government = prov_gov_liberal
			define_general = { name = "Antonio López de Santa Anna" personality = defence_minus_1.101 background = attack_3.5 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
				sub_unit = { type = dragoon value = current }
			}
			kill_leader = "Vicente Ramón Guerrero Saldaña"
			kill_leader = "Juan José Codallos Núñez"
			kill_leader = "José Francisco Gordiano Guzmán"
			kill_leader = "Juan Álvarez Hurtado"
			kill_leader = "José Trinidad Salgado Rentería"
		}
		add_country_modifier = { name = relutanct_figher duration = 365 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = conquest_any }
			defender_goal = { casus_belli = conquest_any }
		}
		ai_chance = { factor = 1 }
	}

	option = {
		name = "We will defend the Constitution! §BPlay as Revolt§W"
		war_exhaustion = 30
		set_global_flag = veracruz_plan
		any_owned = {
			limit = {
				OR = {
					province_id = 2168
					province_id = 2169
					province_id = 2170
					province_id = 2171
					province_id = 2166
					province_id = 2160
					province_id = 2158
					province_id = 2167
					province_id = 2173
					province_id = 2175
					province_id = 2162
					province_id = 2174
					province_id = 2163
					province_id = 2176
					province_id = 2159
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			remove_country_modifier = bustamante_rule
			remove_accepted_culture = afro_latino
			remove_accepted_culture = nahua
			political_reform = closed_borders
			add_country_modifier = {
				name = small_country_draft
				duration = 365
			}
			capital = 2162
			ruling_party_ideology = liberal
			government = prov_gov_liberal
			define_general = { name = "Antonio López de Santa Anna" personality = defence_minus_1.101 background = attack_3.5 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = infantry value = current }
                sub_unit = { type = artillery value = current }
				sub_unit = { type = dragoon value = current }
			}
			kill_leader = "Vicente Ramón Guerrero Saldaña"
			kill_leader = "Juan José Codallos Núñez"
			kill_leader = "José Francisco Gordiano Guzmán"
			kill_leader = "Juan Álvarez Hurtado"
			kill_leader = "José Trinidad Salgado Rentería"
		}
		add_country_modifier = { name = relutanct_figher duration = 365 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = conquest_any }
			defender_goal = { casus_belli = conquest_any }
		}
		change_tag_no_core_switch = MEE
		ai_chance = { factor = 0 }
	}
}

#Bustamante surrenders if MEE occupies Mexico City, ending the war and annexing Mexico to the revolt
country_event = {
	id = 42071031
	title = "Bustamante surrenders!"
	desc = "EVTDESC42071031"
	picture = "mex_city"
	fire_only_once = yes

	trigger = {
		has_global_flag = veracruz_plan
		tag = MEE
		war_with = MEX
		2172 = { controlled_by = THIS }
		year = 1832
		month = 6 #to prevent cheesy instant victory, irl it lasted a whole year, so don't touch this Angel
	}

	option = {
		name = "Hurrah!"
		end_war = MEX
		inherit = MEX
	}
}

#The Zavaleta Conventions: Liberal Victory in Plan de Veracruz, i.e. they have annexed or white peaced MEX
country_event = {
	id = 4207033
	title = "The Zavaleta Conventions"
	desc = "EVTDESC4207033"
	picture = "pedraza"
	fire_only_once = yes

	trigger = {
		tag = MEE
		OR = {
			NOT = { exists = MEX }
			MEX = { exists = yes war = no }
		}
		is_vassal = no
		has_global_flag = veracruz_plan
		NOT = { government = colonial_company_4 } #sanity check
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Glory to President Gómez Pedraza!"
		political_reform = open_borders
		clr_global_flag = veracruz_plan
		set_global_flag = zavaleta_convention
		inherit = MEX
		change_tag = MEX
		government = presidential_dictatorship
		ruling_party_ideology = liberal
		capital = 2172
		political_reform = free_press
		political_reform = yes_meeting
		political_reform = none_voting
		political_reform = harassment
		random_owned = { limit = { owner = { school_reforms = no_schools } } owner = { social_reform = low_schools } }
		MEE = { all_core = { remove_core = MEE } }
		90 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
		89 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
		3450 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
		87 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
		3448 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
		104 = { add_province_modifier = { name = california_missions_mex duration = -1 } }
	}
}

#The Liberals are defeated: Conservative Victory in Plan de Veracruz, i.e. MEE has been annexed
country_event = {
	id = 4208033
	title = "The Liberals are defeated"
	desc = "EVTDESC4208033"
	picture = "bustamante_event"
	fire_only_once = yes

	trigger = {
		tag = MEX
		MEE = { exists = no }
		is_vassal = no
		has_global_flag = veracruz_plan
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Glory to President Anastasio Bustamante!"
		government = presidential_dictatorship
		ruling_party_ideology = conservative
		political_reform = state_press
		political_reform = no_meeting
		political_reform = none_voting
		political_reform = harassment
		clr_global_flag = veracruz_plan
		any_pop = { militancy = -3 consciousness = 4 }
		inherit = MEE
		MEE = { all_core = { remove_core = MEE } }
	}
}

#The Plan of Cuernavaca fires in 1834 if the liberals won the Plan de Veracruz civil war, Santa Anna assumes power
country_event = {
	id = 4207034
	title = "The Plan of Cuernavaca"
	desc = "EVTDESC4207034"
	picture = "santa_anna_veracruz"
	fire_only_once = yes

	trigger = {
		has_global_flag = zavaleta_convention
		tag = MEX
		year = 1834
		month = 4
		is_vassal = no
		NOT = { year = 1836 }
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "Finally, the liberal madness is at an end."
		set_global_flag = plan_of_cuernavaca
		government = presidential_dictatorship
		political_reform = none_voting
		political_reform = state_press
		political_reform = no_meeting
		social_reform = no_schools
		ruling_party_ideology = conservative
		add_country_modifier = { name = military_fueros duration = -1 }
		add_country_modifier = {
			name = santa_ana_rule
			duration = -1
		}
	}
}

#Zacatecas Rebellion happens in April 1835 whether under Bustamante or Santa Anna, resolution in MEX_Events.txt
country_event = {
	id = 4207027
	title = "The Zacatecas Rebellion"
	desc = "EVTDESC4207027"
	picture = "zacatecas_revolt"
	fire_only_once = yes

	trigger = {
		year = 1835
		month = 4
		tag = MEX
		owns = 2158
		owns = 2160
		NOT = {
			year = 1836
			exists = MEE
		}
		OR = {
			has_country_modifier = santa_ana_rule
			has_country_modifier = bustamante_rule
		}
	}

	option = {
		name = "Crush the rebels!"
		set_global_flag = mex_fedrevolt
		war_exhaustion = 10
		any_owned = {
			limit = {
				OR = {
					province_id = 2158
					province_id = 2160
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			government = prov_gov_liberal
			ruling_party_ideology = liberal
			define_general = { name = "Francisco García Salinas" personality = defence_1.1 background = attack_1.1 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cavalry value = current }
			}
			remove_country_modifier = bustamante_rule
			remove_country_modifier = santa_ana_rule
		}
		casus_belli = { target = MEE type = annex_core_country months = 12 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = annex_core_country }
			defender_goal = { casus_belli = conquest_any }
		}
		random_owned = {
			limit = {
				owner = {
					ai = yes
					owns = 2159
					MEE = { ai = yes }
				}
			}
			owner = {
				2159 = {
					sub_unit = { type = infantry value = current }
					sub_unit = { type = infantry value = current }
					sub_unit = { type = cavalry value = current }
					sub_unit = { type = cavalry value = current }
				}
			}
		}
		ai_chance = { factor = 1 }
	}

	option = {
		name = "An end must be put to the constitution. §BPlay as revolt§W"
		set_global_flag = mex_fedrevolt
		war_exhaustion = 10
		any_owned = {
			limit = {
				OR = {
					province_id = 2158
					province_id = 2160
				}
			}
			add_core = MEE
			secede_province = MEE
		}
		MEE = {
			government = prov_gov_liberal
			ruling_party_ideology = liberal
			define_general = { name = "Francisco García Salinas" personality = defence_1.1 background = attack_1.1 }
			capital_scope = {
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cavalry value = current }
			}
			remove_country_modifier = bustamante_rule
			remove_country_modifier = santa_ana_rule
		}
		casus_belli = { target = MEE type = annex_core_country months = 12 }
		war = {
			target = MEE
			attacker_goal = { casus_belli = annex_core_country }
			defender_goal = { casus_belli = conquest_any }
		}
		change_tag_no_core_switch = MEE
		ai_chance = { factor = 0 }
	}
}

#The Siete Leyes are instituted in 1836 if Bustamante won the Plan de Veracruz civil war or if the liberals won and were couped by Santa Anna in the Plan de Cuernavaca
country_event = {
	id = 183536
	title = "EVTNAME183536" #Siete Leyes
	desc = "EVTDESC183536"
	picture = "sieteleyesmex"
	fire_only_once = yes

	trigger = {
		tag = MEX
		OR = {
			has_global_flag = plan_of_cuernavaca
			has_country_modifier = bustamante_rule
		}
	    has_global_flag = eighteenthirty_startdate
		is_vassal = no
		year = 1835
		month = 8
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "EVTOPTA183536"
		random_owned = {
			limit = {
				owner = {
					has_country_modifier = bustamante_rule
				}
			}
			owner = {
				remove_country_modifier = bustamante_rule
				add_country_modifier = {
					name = santa_ana_rule
					duration = -1
				}
			}
		}
		add_country_modifier = { name = fight_the_power duration = 3650 }
		political_reform = one_year_draft
		political_reform = unitary
		clr_country_flag = stay_federalist
		political_reform = state_press
		political_reform = harassment
		political_reform = none_voting
		social_reform = capital_punishment
		political_reform = no_meeting
		government = presidential_dictatorship
        any_pop = {
            limit = {
                is_primary_culture = yes
                OR = {
                    type = soldiers
                    type = aristocrats
                    type = officers
                }
            }
            ideology = {
                value = reactionary
                factor = 0.7
            }
            ideology = {
                value = conservative
                factor = 0.3
            }
        }
        any_pop = {
            limit = {
                NOT = { type = soldiers }
                NOT = { type = aristocrats }
                NOT = { type = officers }
                is_primary_culture = yes
                location = {
                    OR = {
                        province_id = 2137
                        province_id = 2141
                        province_id = 2162
                        province_id = 2166
                        region = MEX_2172
                    }
                }
            }
            ideology = {
                value = liberal
                factor = 0.6
            }
            consciousness = 3
        }
        any_owned = {
            limit = { region = MEX_2172 }
            add_province_modifier = {
                name = peasant_revolt
                duration = 1095
            }
        }
		any_pop = {
			scaled_militancy = {
				ideology = liberal
				factor = 6
			}
			scaled_militancy = {
				ideology = reactionary
				factor = -4
			}
			scaled_militancy = {
				ideology = conservative
				factor = -2
			}
		}
		remove_country_modifier = bustamante_rule
	}
}

#The Texan Revolution occurs in September 1835 no matter what
country_event = {
	id = 183637
	title = "The Texas Revolution"
	desc = "EVTDESC183637"
	picture = "texas_revolution"
	fire_only_once = yes

	trigger = {
		owns = 137
		year = 1835
		NOT = { year = 1836 }
		tag = MEX
	    has_global_flag = eighteenthirty_startdate
		slavery = no_slavery
		month = 9
	}

	mean_time_to_happen = { days = 1 }

	option = {
		name = "EVTOPTA183637"
		any_pop = {
			militancy = 1
			consciousness = 2
		}
		TEX_132 = { add_core = TEX }
		129 = { add_core = TEX }
		3588 = { add_core = TEX }
		105 = { add_core = TEX }
		103 = { add_core = TEX }
		109 = { add_core = TEX }
		107 = { add_core = TEX }
		128 = { add_core = TEX }
		any_owned = {
			limit = {
				OR = {
					province_id = 43
					province_id = 132
					province_id = 133
					province_id = 134
					province_id = 137
					province_id = 3647
				}
			}
			secede_province = TEX
		}
		43 = { any_pop = { limit = { pop_type = soldiers } reduce_pop = 1.3 } }
		TEX = { capital = 133 }
		TEX = {
			define_general = {
				name = "Sam Houston"
                personality = defence_5.1
				background = no_background
			}
			# Audax Validator "." Ignore_NEXT
			define_admiral = {
				name = "Charles Edward Hawkins"
                personality = defence_2.1
				background = attack_3.1
			}
			capital_scope = {
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cuirassier value = current }
				sub_unit = { type = artillery value = current }
			}
			3647 = {
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
			}
		}
		TEX = {
			#Army
			activate_technology = military_staff_system
			#Navy
			activate_technology = naval_design_bureaus
			activate_technology = alphabetic_flag_signaling
			activate_technology = the_command_principle
			activate_technology = fire_control_systems
			activate_technology = naval_professionalism
			#Culture
			activate_technology = malthusian_thought
			activate_technology = introspectionism
		}
		war = {
			target = TEX
			attacker_goal = { casus_belli = annex_core_country }
			defender_goal = { casus_belli = status_quo }
		}
		43 = { change_province_name = "Clarksville" }
		132 = { change_province_name = "Houston" }
		133 = { change_province_name = "Waterloo" }
		134 = { change_province_name = "Fort Parker" }
		137 = { change_province_name = "San Antonio" }
		3647 = { change_province_name = "Victoria" }
		clr_global_flag = texas_rename_mexico
		133 = { state_scope =  { is_slave = yes } }
		TEX = { any_owned = { any_pop = { limit = { has_pop_culture = afro_american } pop_type = slaves } } }
		ai_chance = { factor = 1 }
	}

	option = {
		name = "You can all go to hell and I will go to Texas! §BPlay as Texas§W"
		any_pop = {
			militancy = 1
			consciousness = 2
		}
		TEX_132 = { add_core = TEX }
		129 = { add_core = TEX }
		3588 = { add_core = TEX }
		105 = { add_core = TEX }
		103 = { add_core = TEX }
		109 = { add_core = TEX }
		107 = { add_core = TEX }
		128 = { add_core = TEX }
		any_owned = {
			limit = {
				OR = {
					province_id = 43
					province_id = 132
					province_id = 133
					province_id = 134
					province_id = 137
					province_id = 3647
				}
			}
			secede_province = TEX
		}
		43 = { any_pop = { limit = { pop_type = soldiers } reduce_pop = 1.3 } }
		TEX = { capital = 133 }
		TEX = {
			define_general = {
				name = "Sam Houston"
                personality = defence_5.1
				background = no_background
			}
			# Audax Validator "." Ignore_NEXT
			define_admiral = {
				name = "Charles Edward Hawkins"
                personality = defence_2.1
				background = attack_3.1
			}
			capital_scope = {
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cuirassier value = current }
				sub_unit = { type = artillery value = current }
			}
			3647 = {
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
			}
		}
		TEX = {
			#Army
			activate_technology = military_staff_system
			#Navy
			activate_technology = naval_design_bureaus
			activate_technology = alphabetic_flag_signaling
			activate_technology = the_command_principle
			activate_technology = fire_control_systems
			activate_technology = naval_professionalism
			#Culture
			activate_technology = malthusian_thought
			activate_technology = introspectionism
		}
		war = {
			target = TEX
			attacker_goal = { casus_belli = annex_core_country }
			defender_goal = { casus_belli = status_quo }
		}
		43 = { change_province_name = "Clarksville" }
		132 = { change_province_name = "Houston" }
		133 = { change_province_name = "Waterloo" }
		134 = { change_province_name = "Fort Parker" }
		137 = { change_province_name = "San Antonio" }
		3647 = { change_province_name = "Victoria" }
		clr_global_flag = texas_rename_mexico
		change_tag_no_core_switch = TEX
		133 = { state_scope =  { is_slave = yes } }
		TEX = { any_owned = { any_pop = { limit = { has_pop_culture = afro_american } pop_type = slaves } } }
		ai_chance = { factor = 0 }
	}

	option = {
		name = "EVTOPTB183637"
		set_country_flag = texas_let_go
		prestige = -25
		any_pop = {
			militancy = 1
			consciousness = 2
		}
		TEX_132 = { add_core = TEX }
		129 = { add_core = TEX }
		3588 = { add_core = TEX }
		105 = { add_core = TEX }
		103 = { add_core = TEX }
		109 = { add_core = TEX }
		107 = { add_core = TEX }
		128 = { add_core = TEX }
		any_owned = {
			limit = {
				OR = {
					province_id = 43
					province_id = 132
					province_id = 133
					province_id = 134
					province_id = 137
					province_id = 3647
				}
			}
			secede_province = TEX
		}
		43 = { any_pop = { limit = { pop_type = soldiers } reduce_pop = 1.3 } }
		TEX = { capital = 133 }
		TEX = {
			define_general = {
				name = "Sam Houston"
                personality = defence_5.1
				background = no_background
			}
			# Audax Validator "." Ignore_NEXT
			define_admiral = {
				name = "Charles Edward Hawkins"
                personality = defence_2.1
				background = attack_3.1
			}
			capital_scope = {
                sub_unit = { type = infantry value = current }
				sub_unit = { type = cuirassier value = current }
				sub_unit = { type = artillery value = current }
			}
			3647 = {
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
				sub_unit = { type = frigate value = current }
			}
		}
		TEX = {
			#Army
			activate_technology = military_staff_system
			#Navy
			activate_technology = naval_design_bureaus
			activate_technology = alphabetic_flag_signaling
			activate_technology = the_command_principle
			activate_technology = fire_control_systems
			activate_technology = naval_professionalism
			#Culture
			activate_technology = malthusian_thought
			activate_technology = introspectionism
		}
		relation = {
			who = TEX
			value = 15
		}
		43 = { change_province_name = "Clarksville" }
		132 = { change_province_name = "Houston" }
		133 = { change_province_name = "Waterloo" }
		134 = { change_province_name = "Fort Parker" }
		137 = { change_province_name = "San Antonio" }
		3647 = { change_province_name = "Victoria" }
		clr_global_flag = texas_rename_mexico
		133 = { state_scope =  { is_slave = yes } }
		TEX = { any_owned = { any_pop = { limit = { has_pop_culture = afro_american } pop_type = slaves } } }
		ai_chance = { factor = 0 }
	}
}

###Below this point are the singular flavor events disconnected from other content###

#Las Grutas de Cacahuamilpa (Prestige Event)
country_event = {
	id = 4206995
	title = "Las Grutas de Cacahuamilpa"
	desc = "EVTDESC4206995"
	picture = "grutas"
	fire_only_once = yes

	trigger = {
		tag = MEX
		year = 1835
		NOT = { year = 1836 }
	}

	mean_time_to_happen = { months = 5 }

	option = {
		name = "A fine piece of art."
		prestige = 2.5
	}
}

#El Periquillo Sarniento (Prestige Event)
country_event = {
	id = 4206992
	title = "El Periquillo Sarniento"
	desc = "EVTDESC4206992"
	picture = "periquillo"
	fire_only_once = yes

	trigger = {
		tag = MEX
		year = 1831
		NOT = { year = 1832 }
	}

	mean_time_to_happen = { months = 7 }

	option = {
		name = "Definitely something to be proud of."
		prestige = 2.5
		any_pop = {
			limit = {
				has_pop_culture = mexican
			}
			militancy = -0.1
		}
	}
}