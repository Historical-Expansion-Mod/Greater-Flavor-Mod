country_event = {
	id = 6020299
	title = ""
	desc = ""
	picture = Picture
	
	fire_only_once = yes
	trigger = { tag = CLN }
	mean_time_to_happen = { days = 1 }
	
	option = {
	name = ""
	any_country = {
		limit = { 
		capital_scope = { continent = south_america }
		is_culture_group = latin_american_cultures
		NOT = { primary_culture = brazilian } }
		set_variable = { which = brz_integration value = 1 }
	}
	URU = { set_country_flag = can_integrate_brz }
	PRG = { set_country_flag = can_integrate_brz }
	ENT = { set_country_flag = can_integrate_brz }
}
}
#BRZ grand duchy integration
country_event = {
    id = 6020300
    title = "6020300 BRZ INTEGRATION DL SETUP"
    desc = ""
    picture = Picture
    
    trigger = {
        OR = { 
            vassal_of = BRZ
            AND = { vassal_of = UPB UPB = { primary_culture = brazilian } }
        }
		NOT = { any_owned_province = { controlled_by = REB } }
        NOT = { capital_scope = { has_province_modifier = nationalist_agitation } }
		overlord = { relation = { who = THIS value = 0 } } 
		OR = {	
		    AND = { #step 1
			    overlord = { state_n_government = 1 }
                check_variable = { which = brz_integration value = 1 }
			    NOT = { check_variable = { which = brz_integration value = 2 } }
		    }
		    AND = { # step 2
			    overlord = { nationalism_n_imperialism = 1 }
                check_variable = { which = brz_integration value = 2 }
			    NOT = { check_variable = { which = brz_integration value = 3 } }
		    }
            AND = {	 # step 3 and 4
                overlord = { revolution_n_counterrevolution = 1 }
				check_variable = { which = brz_integration value = 3 }
				has_country_flag = can_integrate_brz
                NOT = { check_variable = { which = brz_integration value = 5 } }
			}	
        }
		ai = yes
	}
    
    mean_time_to_happen = { 
		months = 30
		modifier = {
			factor = 0.1
			OR = {
				AND = {
					check_variable = { which = brz_integration value = 1 }
					NOT = { check_variable = { which = brz_integration value = 2 } }
				}
				check_variable = { which = brz_integration value = 3 }
			}
		}
		modifier = {
			factor = 0.90
			year = 1870
		}
		modifier = {
			factor = 0.90
			overlord = { relation = { who = THIS value = 190 } }
		}
		modifier = {
			factor = 0.90
			overlord = { relation = { who = THIS value = 170 } }
		}
		modifier = {
			factor = 0.90
			overlord = { relation = { who = THIS value = 150 } }
		}
		modifier = {
			factor = 0.90
			NOT = { average_militancy = 2 }
		}
		modifier = {
			factor = 0.95
			NOT = { average_consciousness = 2 }
		}
		modifier = {
			factor = 0.90
			capital_scope = { OR = { country_units_in_province = BRZ country_units_in_province = UPB }}
		}
		modifier = {
			factor = 0.90
			overlord = { is_sphere_leader_of = THIS }
		}
		modifier = {
			factor = 1.10
			NOT = { overlord = { alliance_with = THIS } }
		}
		modifier = {
			factor = 1.35
			war = yes
		}
		modifier = {
			factor = 1.10
			average_militancy = 3
		}
		modifier = {
			factor = 1.10
			average_militancy = 5
		}
		modifier = {
			factor = 1.10
			average_militancy = 7
		}
		modifier = {
			factor = 1.05
			average_consciousness = 3
		}
		modifier = {
			factor = 1.05
			average_consciousness = 5
		}
		modifier = {
			factor = 1.05
			average_consciousness = 7
		}
	}
    
    immediate = {
		THIS = { set_country_flag = integration_target }
        2447 = { owner = { set_country_flag = viewer } }
        
        #target country name DL
        THIS = { limit = { has_country_flag = integration_target } set_country_flag = dynamic_loc }
        slot_2 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 2 }

        #Target country flag DL
        THIS = { limit = { has_country_flag = integration_target } set_country_flag = dynamic_loc }
        slot_1 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 4 }

        #Brazil/UPB name DL
        any_country = { limit = { has_country_flag = viewer } set_country_flag = dynamic_loc }
        slot_4 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 2 }

        #Brazil/UPB flag DL
        any_country = { limit = { has_country_flag = viewer } set_country_flag = dynamic_loc }
        slot_3 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 4 }

        #slot 37
        slot_37 = { secede_province = THIS state_scope = { change_region_name = "Over the years, the bonds between" } secede_province = QQQ }
		#slot 36
		slot_36 = { secede_province = THIS state_scope = { change_region_name = "and" } secede_province = QQQ }
		# step 1
		random_owned = {
			limit = { owner = { check_variable = { which = brz_integration value = 1 } NOT = { check_variable = { which = brz_integration value = 2 } } } }
            owner = {
                slot_35 = { secede_province = THIS state_scope = { change_region_name = "have grown tighter. Through trade freely flowing through rivers, roads and rails and centralization efforts from the government. Brazilian culture and language slowly spreads in " } secede_province = QQQ }
                slot_34 = { secede_province = THIS state_scope = { change_region_name = "It's time we begin decreasing local autonomy." } secede_province = QQQ }
                slot_32 = { secede_province = THIS state_scope = { change_region_name = "Advances centralization in" } secede_province = QQQ }
            }
        }
		# step 2
		random_owned = {
			limit = { owner = { check_variable = { which = brz_integration value = 2 } NOT = { check_variable = { which = brz_integration value = 3 } } } }
            owner = {
                slot_35 = { secede_province = THIS state_scope = { change_region_name = "have grown tighter. Through trade freely flowing through rivers, roads and rails and centralization efforts from the government. Brazilian culture and language slowly spreads in " } secede_province = QQQ }
                slot_34 = { secede_province = THIS state_scope = { change_region_name = "It's time we continue decreasing local autonomy, with the ultimate objective of fully integrating them into our nation." } secede_province = QQQ }
                slot_32 = { secede_province = THIS state_scope = { change_region_name = "Adds Brazilian as an accepted culture in" } secede_province = QQQ }
            }
        }
        # step 3
		random_owned = { 
			limit = { owner = { check_variable = { which = brz_integration value = 3 } NOT = { check_variable = { which = brz_integration value = 4 } } } }
			owner = { 
                slot_35 = { secede_province = THIS state_scope = { change_region_name = "have slowly grown tighter. Interacting with Brazilian institutions, culture and language has already become a natural part of life for many in" } secede_province = QQQ }
                slot_34 = { secede_province = THIS state_scope = { change_region_name = "Now it's time we make changes to the local constitution to make it nearly identical with that of our nation, the ultimate goal being to prepare the local administrative body for future annexation." } secede_province = QQQ }
                slot_32 = { secede_province = THIS state_scope = { change_region_name = "Advances centralization in" } secede_province = QQQ }
			}
        }
		# step 4
        random_owned = { 
			limit = { owner = { check_variable = { which = brz_integration value = 4 } NOT = { check_variable = { which = brz_integration value = 5 } } } }
			owner = { 
                slot_35 = { secede_province = THIS state_scope = { change_region_name = "have slowly grown tighter. Interacting with Brazilian institutions, culture and language has already become a natural part of life for many in" } secede_province = QQQ }
                slot_34 = { secede_province = THIS state_scope = { change_region_name = "We can finally fully integrate our subject as a integral part of our territory." } secede_province = QQQ }
                slot_32 = { secede_province = THIS state_scope = { change_region_name = "Annex" } secede_province = QQQ }
			}
        }
    any_country = { 
			limit = { 
				has_country_flag = viewer
			}
			country_event = 6020301
            clr_country_flag = viewer
    }
    
    }    
    option = { name = "1" }  
}
country_event = {
    id = 6020301
    title = "Centralizing a Grand Duchy"
    desc = ""
    picture = brz_grand_duchy_integration

    is_triggered_only = yes

    immediate = {
        black = {}
        slot_37 = {}
        blue = {}
        slot_3 = {} #brz/upb flag
        slot_4 = {} #brz/upb name
        black = {}
        slot_36 = {}
        blue = {}
        slot_1 = {} #target flag
        slot_2 = {} #target name
        black = {}
        slot_35 = {}
		blue = {}
		slot_1 = {} #target flag
		slot_2 = {} #target name
		black = {}
        slot_34 = {}
    }
    option = {
        name = "Brazilification is inevitable."
        slot_32 = {}
        green = {}
        slot_1 = {}
        slot_2 = {}
     any_country = {
        random_owned = { #step 1
            limit = { owner = { has_country_flag = integration_target check_variable = { which = brz_integration value = 1 } NOT = { check_variable = { which = brz_integration value = 2 } } } }
			owner = {
                change_variable = { which = brz_integration value = 1 }
			    relation = { who = BRZ value = -100 }
				relation = { who = UPB value = -100 }
			    any_owned = { add_province_modifier = { name = nationalist_agitation duration = 1826 } }
                clr_country_flag = integration_target
            }
        }
		random_owned = { # step 2
			limit = { owner = { has_country_flag = integration_target check_variable = { which = brz_integration value = 2 } NOT = { check_variable = { which = brz_integration value = 3 } } } }
				owner = {
					add_accepted_culture = brazilian
					change_variable = { which = brz_integration value = 1 } 
					relation = { who = BRZ value = -200 }
					relation = { who = UPB value = -200 }
					any_owned = { add_province_modifier = { name = nationalist_agitation duration = 1826 } }
					clr_country_flag = integration_target
				}
		}
		random_owned = { # step 3
			limit = { owner = { has_country_flag = integration_target check_variable = { which = brz_integration value = 3 } NOT = { check_variable = { which = brz_integration value = 4 } } } }
				owner = { 
					change_variable = { which = brz_integration value = 1 } 
					relation = { who = BRZ value = -400 }
					relation = { who = UPB value = -400 }
					any_owned = { add_province_modifier = { name = nationalist_agitation duration = 1826 } }
					clr_country_flag = integration_target
				}
		}
		random_owned = { #step 4
			limit = { owner = { has_country_flag = integration_target primary_culture = platinean check_variable = { which = brz_integration value = 4 } } }
			owner = {
				primary_culture = brazilian
				change_variable = { which = brz_integration value = 1 } 
				any_owned = {
					add_province_modifier = { name = cultural_unity_assimilation duration = -1 }
					add_core = BRZ
					secede_province = BRZ
				}
				clr_country_flag = integration_target
			}
		}
		random_owned = {
			limit = { owner = { has_country_flag = integration_target primary_culture = north_andean check_variable = { which = brz_integration value = 4 } } }
			owner = {
				primary_culture = brazilian
				change_variable = { which = brz_integration value = 1 } 
				any_owned = {
					add_province_modifier = { name = cultural_unity_assimilation duration = -1 }
					add_core = BRZ
					secede_province = BRZ
				}
				clr_country_flag = integration_target
			}
		}
		random_owned = {
			limit = { owner = { has_country_flag = integration_target primary_culture = south_andean check_variable = { which = brz_integration value = 4 } } }
			owner = {
				primary_culture = brazilian
				change_variable = { which = brz_integration value = 1 } 
				any_owned = {
					add_province_modifier = { name = cultural_unity_assimilation duration = -1 }
					add_core = BRZ
					secede_province = BRZ
				}
				clr_country_flag = integration_target
			}
		}
		random_owned = {
			limit = { owner = { has_country_flag = integration_target primary_culture = chilean check_variable = { which = brz_integration value = 4 } } }
			owner = {
				primary_culture = brazilian
				change_variable = { which = brz_integration value = 1 } 
				any_owned = {
					add_province_modifier = { name = cultural_unity_assimilation duration = -1 }
					add_core = BRZ
					secede_province = BRZ
				}
				clr_country_flag = integration_target
			}
		}
	}
    }
}

#Fixed Farrapos, sorry for moving this here Dukecza I swear it was to better organize
country_event = {
	id  = 60205630
	title = ""
	desc = ""

	fire_only_once = yes

	trigger = {
		tag = CLN
		any_land_province = {
			owner = {
				OR = {
					AND = {
						tag = BRZ
						BRZ = { has_country_flag = rgs_revolt_flag }
						RGS = { exists = no }
					}
					AND = {
						tag = RGS
						exists = yes
						RGS = { has_country_flag = rgs_revolt_flag_2 }
						OR = { 
							3584 = { controlled_by = RGS }
							RGS = { war = no }
						}
					}
				}
			}
		}
	}
	immediate = {
		any_country = { limit = { owns = 2464 } set_country_flag = farrapos_winner }
		any_country = { 
			limit = { has_country_flag = farrapos_winner }
			random_owned = { 
				limit = { owner = { tag = BRZ has_country_flag = farrapos_winner } } 
				owner = {
					slot_37 = { secede_province = THIS state_scope = { change_region_name = "Our forces came back victorious in the Farroupilha revolt, the rebelious Rio-Grandense@RGS" } secede_province = QQQ }
					slot_36 = { secede_province = THIS state_scope = { change_region_name = "that once pranced about in the plains and mountains of the South have been defeated and utterly humiliated" } secede_province = QQQ }
					slot_35 = { secede_province = THIS state_scope = { change_region_name = "Though some of these rebels believe that they were successful in destabilizing the conservatives, our army will proudly march." } secede_province = QQQ }
					slot_34 = { secede_province = THIS state_scope = { change_region_name = "Recently, the question of how to treat these radicals has become an issue within the Imperial Court" } secede_province = QQQ }
					slot_33 = { secede_province = THIS state_scope = { change_region_name = "Should we be harsh to these sewer rats? " } secede_province = QQQ }
					slot_32 = { secede_province = THIS state_scope = { change_region_name = "Or accept them as members of the Empire once more?" } secede_province = QQQ }
					#tooltip
					slot_10 = { secede_province = THIS state_scope = { change_region_name = "Be lenient with the rebels" } secede_province = QQQ } 
					slot_11 = { secede_province = THIS state_scope = { change_region_name = "Be harsher with Rio-Grandense rebels" } secede_province = QQQ }
					slot_12 = { secede_province = THIS state_scope = { change_region_name = "Be extremely harsh with Rio-Grandense rebels" } secede_province = QQQ }			
				}
			}
			random_owned = { 
				limit = { owner = { tag = RGS has_country_flag = farrapos_winner } } 
				owner = {
					slot_37 = { secede_province = THIS state_scope = { change_region_name = "Huzzah! The Farrapos have sieged down the capital of The Empire of Brazil @BRZ" } secede_province = QQQ } 
					slot_36 = { secede_province = THIS state_scope = { change_region_name = "The Emperor and the Imperial Court will have to accept our demands" } secede_province = QQQ } 
					slot_35 = { secede_province = THIS state_scope = { change_region_name = "Our army parades victorious over the temporary capital." } secede_province = QQQ } 
					slot_34 = { secede_province = THIS state_scope = { change_region_name = "Should we replace the conservatives in the Empire with our liberal agenda?" } secede_province = QQQ }
					slot_33 = { secede_province = THIS state_scope = { change_region_name = "Should we remove the Emperor from the question altogether?" } secede_province = QQQ }
					slot_32 = { secede_province = THIS state_scope = { change_region_name = "Or should we seek a new light as an independent republic, similar to our Platine brothers?" } secede_province = QQQ }
					#tooltip
					slot_10 = { secede_province = THIS state_scope = { change_region_name = "Declare an independent Rio-Grandense Republic! @RGS and attempt to annex the Juliana Republic! @SAC" } secede_province = QQQ } 
					slot_11 = { secede_province = THIS state_scope = { change_region_name = "Switch to The Empire of Brazil! @BRZ and put the liberals in charge" } secede_province = QQQ }
					slot_12 = { secede_province = THIS state_scope = { change_region_name = "Switch to The Empire of Brazil! @BRZ and turn it into a Radical Republic" } secede_province = QQQ }				
				}
			}
        #target country name DL
        any_country = { limit = { NOT = { has_country_flag = farrapos_winner } has_country_flag = rgs_revolt_flag_2 } set_country_flag = dynamic_loc }
        slot_20 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 2 }

        #Target country flag DL
        any_country = { limit = { NOT = { has_country_flag = farrapos_winner } has_country_flag = rgs_revolt_flag_2 } set_country_flag = dynamic_loc }
        slot_21 = { add_province_modifier = { name = dynamic_loc duration = -1 } }
        CLN = { country_event = 4 }
	}		
	any_country = {
		limit = { has_country_flag = farrapos_winner }
			country_event = 60205631
		}
}
	option = {
        name = "Ok"
    }
}

country_event = {
	id = 60205631
	title = "Victory in the Farroupilha!"
	desc = ""
	picture = "farrapos"

	is_triggered_only = yes

	immediate = {
		black = {}
		slot_37 = {}
		black = {}
		slot_36 = {}
		fullstop_state = {}
		slot_35 = {}
		slot_34 = {}
		slot_33 = {}
		slot_32 = {}
	}

	option = { #leniency/independent path
		name = "Hurrah!"
		slot_10 = {}
		linebreak_state = {}
		random_owned = {
			limit = { owner = { tag = BRZ has_country_flag = farrapos_winner } }
			owner = {
				any_pop = { 
					limit = { NOT = { is_core = RGS } has_pop_culture = brazilian }
						militancy = 2
						consciousness = 3
					}
       				any_pop = {
       					limit = {
       				    	location = { is_core = RGS }
       				    	has_pop_culture = brazilian
       					}
       						militancy = -2
       						consciousness = -3
       					}
       					any_owned = {
       				    	limit = { is_core = RGS }
       				    	add_province_modifier = {
       				        	name = nationalist_agitation
       				        	duration = 3653
       				   		}
       				}
					clr_country_flag = rgs_revolt_flag
			}
		}
		random_owned = {
			limit = { owner = { tag = RGS has_country_flag = farrapos_winner } }
			owner = {
				end_war = BRZ
				any_pop = { limit = { OR = { has_pop_culture = brazilian has_pop_culture = platinean } } militancy = -5 consciousness = -5 }
				government = democracy
				nationalvalue = nv_liberty
        		political_reform = no_slavery
        		political_reform = federalism
        		political_reform = free_press
				BRZ = {
					clr_country_flag = rgs_revolt_flag
					all_core = { limit = { is_core = RGS } remove_core = BRZ secede_province = RGS }
					all_core = { limit = { is_core = SAC } remove_core = BRZ secede_province = SAC }
				}
				2346 = { remove_core = BRZ } #failsafe due to bug report
        		random_owned = {
            		limit = { owner = { NOT = { has_global_flag = fantasy_countries_enabled } } }
            		owner = { remove_accepted_culture = north_german }
        		}
        		SAC = { country_event = { id = 127869 days = 1 } } # SAC can get annexed or go to war - see [event 127869]
			}
		}
	}
	option = { #Beat them a little/switch to BRZ and make it Liberal
		name = "Onwards! $COUNTRY_ADJ$!"
		slot_11 = {}
		linebreak_state = {}
		random_owned = {
			limit = { owner = { tag = BRZ has_country_flag = farrapos_winner } }
			owner = {
       			any_pop = {
       			    limit = {
       			        location = { is_core = RGS }
       			        has_pop_culture = brazilian
       			    }
					reduce_pop = 0.99
       			    militancy = 3
       			    consciousness = 1
       			}
       			any_owned = {
       			    limit = { is_core = RGS }
       			    add_province_modifier = {
       			        name = nationalist_agitation
       			        duration = 3653
       			    }
       			}
				clr_country_flag = rgs_revolt_flag
			}
		}
		random_owned = {
			limit = { owner = { tag = RGS has_country_flag = farrapos_winner } }
			owner = {
			end_war = BRZ
				ruling_party_ideology = liberal
				nationalvalue = nv_liberty
				government = hms_government
				political_reform = federalism
				political_reform = free_press
            	random_owned = {
            		limit = { owner = { has_global_flag = fantasy_countries_enabled } }
            		owner = { add_accepted_culture = north_german add_accepted_culture = platinean }
            	}
				any_pop = { limit = { OR = { is_accepted_culture = yes is_primary_culture = yes } } ideology = { factor = 0.3 value = liberal } }
				
				clr_country_flag = rgs_revolt_flag
				capital = 2447
				change_tag = BRZ
				RGS = { annex_to = BRZ }
				SAC = { annex_to = BRZ }
			}
		}
		}
	option = { #Rio Grande Dalenda Est/ Switch to BRZ and end the Empire
		name = "Long live the $COUNTRY_ADJ$ people!"
		slot_12 = {}
		linebreak_state = {}
		random_owned = {
			limit = { owner = { tag = BRZ has_country_flag = farrapos_winner } }
			owner = {
				owner = {
       			any_pop = {
       			    limit = {
       			        location = { is_core = RGS }
       			        has_pop_culture = brazilian
       			    }
					reduce_pop = 0.90
       			    militancy = 3
       			    consciousness = 1
       			}
       			any_owned = {
       			    limit = { is_core = RGS }
       			    add_province_modifier = {
       			        name = nationalist_agitation
       			        duration = 3653
       			    }
       			}
				clr_country_flag = rgs_revolt_flag
				}
			}
		}
		random_owned = {
			limit = { owner = { tag = RGS has_country_flag = farrapos_winner } }
			owner = {
					end_war = BRZ
					any_pop = { limit = { has_pop_culture = brazilian } militancy = -4 consciousness = -4 }
					remove_country_modifier = unrecognized_country
        			ruling_party_ideology = liberal
        			government = radical_republic
        			nationalvalue = nv_liberty
					political_reform = state_equal_weight
					political_reform = proportional_representation
					political_reform = yes_meeting
					political_reform = free_press
					political_reform = non_secret_ballots
					political_reform = all_voting_pops
					political_reform = federalism
					political_reform = universal_voting
					political_reform = no_slavery
					clr_country_flag = rgs_revolt_flag
            		random_owned = {
            		    limit = { owner = { has_global_flag = fantasy_countries_enabled } }
            		    owner = { add_accepted_culture = north_german add_accepted_culture = platinean }
            		}
					change_tag = BRZ
					RGS = { annex_to = BRZ }
					SAC = { annex_to = BRZ }
					any_pop = { limit = { is_accepted_culture = yes } ideology = { factor = 0.3 value = liberal } }
					capital = 2447
			}
		}
	}
}