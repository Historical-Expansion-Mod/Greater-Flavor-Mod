#Introdution Events

# The following event defines what countries are treated as colonial 
# this is ignored if the countries are already civilised
# countries will civilise on release

#
#
#		Known bugs:
#
#			Formables being set incorrectly/not set: Duplicate formable entries here, each instance of the same dismantlement formable tag must be mutially exclusive, ie no FIN formable twice
#

country_event = { # Prime Colonial Territory - forces historical colonies/borders
    id = 20450
    title = "Assign Colonial Land"
    is_triggered_only = yes
	
	immediate = {
		any_land_province = {
			limit = {
				# Provinces
				OR = {
					provid = 1687
					provid = 1686
					provid = 3865
					provid = 1688
				}
			}
			add_province_modifier = { 
				name = dismantlement_colony
				duration = -1
			}
			# Need a keylist for this
		}
	}
	
	option = {
        name = "Colonial Flags set"
    }
}


country_event = { # Dismantlement Formables	# Dynamic - You can add your own dismantlement formables	
    id = 20452
    title = "Dismantlement Formables Tags"
    is_triggered_only = yes
	
	immediate = {
	
		any_country = { set_variable = { which = dismantlement_formable value = 0 } }
		CLN = { set_variable = { which = total_dismantlement_formables value = 0 } }
		clr_global_flag = dismantlement_formables_avalible

		any_country = {				# Far Eastern Republic
			limit = {
				OR = {
					tag = KAM	# Kamchatka
					tag = YAK	# Yakutia
					tag = BRY	# Buryatia
					tag = ALT	# Altai
					tag = TNT	# Tannu Tuva
					tag = GUK	# Guangxi Clique
					tag = SIB	# Siberia
					tag = LSK	# Alaska
					tag = MGL	# Mongolia
					#AND = { tag = LSK LSK = { capital_scope = { owned_by = RUS } } }
					#AND = { tag = LSK LSK = { capital_scope = { owned_by = RUS } } } Mongolia?
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			KAM = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}
		

		any_country = {				# Buryatia
			limit = {
				OR = {
					tag = TNT	# Tannu Tuva
					tag = ALT	# Altai
				}
				NOT = { BRY = { capital_scope = { owned_by = KAM } } }
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			BRY = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Denmark
			limit = {
				NOT = { DEN = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = GRN	# Greenland
					tag = ICL	# Iceland
					tag = SWH	# Schleswig-Holstein
					tag = FRO	# Faroe Islands
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			DEN = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Norway
			limit = {
				NOT = { NOR = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = GRN	# Greenland
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			NOR = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Sweden
			limit = {
				NOT = { SWE = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = ALN	# Åland
					tag = FIN	# Finland
					tag = NOR	# Norway
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			SWE = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# United Baltic Duchy
			limit = {
				OR = {
					tag = LIT	# Lithuania
					tag = LAT	# Latvia
					tag = EST	# Estonia
					tag = ALN	# Åland
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			UBD = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Finland
			limit = {
				OR = {
					AND = { tag = EST }	# Estonia
					AND = { tag = KRL }	# Karelia
					AND = { tag = SMI }	# Sápmi
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			FIN = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# United States
			limit = {
				USA = { exists = yes }
				NOT = { USA = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = HAW	# Hawaii
					tag = LSK	# Alaska
					tag = ACA	# Acadia
					tag = TEX	# Texas
					tag = CAL	# California
					tag = ORE	# Oregon
					tag = DES	# Deseret
					tag = DAK	# Dakota
					tag = ULA	# Louisiana
					tag = NEN	# New England
					tag = MAN	# New York
					tag = SON	# Sonora
					tag = MRU	# Maritimes
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			USA = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Canada
			limit = {
				CAN = { exists = yes }
				NOT = { CAN = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = COL	# Columbia
					tag = LSK	# Alaska
					tag = ACA	# Acadia
					AND = { tag = CAL CAL = { capital_scope = { owner = { primary_culture = british } } } }	# California
					tag = NEN	# New England
					tag = NEW	# Newfoundland
					AND = { tag = MAN MAN = { capital_scope = { owner = { primary_culture = british } } } }	# New York
					tag = RPL	# Rupert's Land
					tag = QUE	# Quebec
					tag = MRU	# Maritimes
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			CAN = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Central America
			limit = {
				NOT = { UCA = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = YUC	# Yucatan
					tag = LOS	# Los Altos
					tag = OAX	# Oaxaca
					tag = CHP	# Chiapas
					tag = TRS	# Tabasco
					tag = BLZ	# Belize
					tag = PRI	# Puerto Rico
					tag = CUB	# Cuba
					tag = DOM	# Dominican Republic
					tag = COS	# Costa Rica
					tag = ELS	# El Salvador
					tag = GUA	# Guatemala
					tag = HON	# Honduras
					tag = NIC	# Nicaragua
					tag = PNM	# Panama
					tag = MSK	# Mosquito Coast
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			UCA = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}
		any_country = {				# French West Indies
			limit = {
				NOT = { FWI = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = CRB	# Caribbean
					tag = NAN	# Netherlands Antilles
					tag = HAI	# Haiti
					tag = BLZ 	# Belize
					tag = DOM 	# Dominican Republic
					tag = JAM 	# Jamaica
					tag = MSK	# Mosquito Coast
					tag = GUY	# Guyana
					tag = SUR	# Suriname
					tag = RIG 	# Independent Guiana
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			FWI = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# British West Indies
			limit = {
				NOT = { CRB = { has_country_flag = dismantlement_targets } }
				
				OR = {
					tag = FWI	# Caribbean
					tag = NAN	# Netherland Antilles
					tag = HAI	# Haiti
					tag = BLZ 	# Belize
					tag = DOM 	# Dominican Republic
					tag = JAM 	# Jamaica
					tag = MSK	# Mosquito Coast
					tag = GUY	# Guyana
					tag = SUR	# Suriname
					tag = RIG 	# Independent Guiana
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			CRB = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Dutch West Indies
			limit = {
				NOT = { NAN = { has_country_flag = dismantlement_targets } }
				OR = {
					tag = CRB	# Caribbean
					tag = FWI	# French West Indies
					tag = HAI	# Haiti
					tag = BLZ 	# Belize
					tag = DOM 	# Dominican Republic
					tag = JAM 	# Jamaica
					tag = MSK	# Mosquito Coast
					tag = GUY	# Guyana
					tag = SUR	# Suriname
					tag = RIG 	# Independent Guiana
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			NAN = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}
	
		any_country = {				# Intermarium
			limit = {
				OR = {
					tag = UKR
					tag = RUT
					tag = BYE
					tag = LIT
					tag = LAT
					tag = EST
					tag = POL
					tag = GLM
					tag = PLC
					tag = UBD
					tag = MOL
					tag = CRI
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			PLR = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Ukraine
			limit = {
				OR = {
					AND = { tag = DON }	# Check that Ukraine is also being dismantled to avoid finland-in-exile
					tag = CRI
					tag = RUT
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			UKR = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}

		any_country = {				# Transcaucasia
			limit = {
				OR = {
					tag = OSS	# Osseitia  								# Check that Ukraine is also being dismantled to avoid finland-in-exile
					tag = CIR	# Circassia
					tag = DAG	# Dagestan
					tag = GEO	# Georgia
					tag = AZB	# Azerbijian
					tag = ARM	# Armenia
					tag = SVA	# Svaneti
					tag = MIG	# Mingrelia
					tag = ABK   # Abkhazia
					tag = CHY   # Chechnya
				}
				has_country_flag = dismantlement_targeting_long_buffer	
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			TCA = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}
		
		any_country = {				# South Germany
			limit = {
				OR = {
					tag = WUR
					tag = BAD
					tag = SGM
					tag = ALS
					tag = BAV
					tag = FRK
				}
				has_country_flag = dismantlement_targeting_long_buffer
			}
			set_global_flag = dismantlement_formables_avalible
			any_country = { limit = { check_variable = { which = dismantlement_formable value = 0.99 } } change_variable = { which = dismantlement_formable value = 1 } }
			CLN = { change_variable = { which = total_dismantlement_formables value = 1 } }
			SGF = { set_country_flag = dismantlement_formable change_variable = { which = dismantlement_formable value = 1 } }
		}
	}
	
	option = {
        name = "Formable Flags set"
    }
}